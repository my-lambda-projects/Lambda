<!doctype html>
<html lang="en">
  
<!-- Mirrored from docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 12 Apr 2021 01:12:35 GMT -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  
  <meta charset="utf-8" />
  <title>Creating CI tests with the Checks API - GitHub Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="alternate icon" type="image/png" href="https://docs.github.com/assets/images/site/favicon.png">
  <link rel="icon" type="image/svg+xml" href="https://docs.github.com/assets/images/site/favicon.svg">
  <link rel="stylesheet" href="https://docs.github.com/dist/index.css?hash=761223e35687cc9bbc77f32e2c24a161">

  
  
    <meta name="description" content="Build a continuous integration server to run tests using a GitHub App and the Checks API.">
  
  
    <meta name="keywords" content="github apps">
  
  
  
    <link
      rel="alternate"
      hreflang="en"
      href="https://docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api"
    />
  
    <link
      rel="alternate"
      hreflang="zh-Hans"
      href="https://docs.github.com/cn/developers/apps/creating-ci-tests-with-the-checks-api"
    />
  
    <link
      rel="alternate"
      hreflang="ja"
      href="https://docs.github.com/ja/developers/apps/creating-ci-tests-with-the-checks-api"
    />
  
    <link
      rel="alternate"
      hreflang="es"
      href="https://docs.github.com/es/developers/apps/creating-ci-tests-with-the-checks-api"
    />
  
    <link
      rel="alternate"
      hreflang="pt"
      href="https://docs.github.com/pt/developers/apps/creating-ci-tests-with-the-checks-api"
    />
  
    <link
      rel="alternate"
      hreflang="de"
      href="https://docs.github.com/de/developers/apps/creating-ci-tests-with-the-checks-api"
    />
  
  <meta name="google-site-verification" content="OgdQc0GZfjDI52wDv1bkMT-SLpBUo_h5nn9mI9L22xQ" />
  <meta name="google-site-verification" content="c1kuD-K2HIVF635lypcsWPoD4kilo5-jA_wBFyT4uMY" />

  
  <meta name="csrf-token" content="JyWx88Fa-d-9rRoIy1nh-ZEzyYTdnM2hzHlQ">
  <meta name="site.data.ui.search.placeholder" content="Search topics, products...">
</head>


  <body class="d-lg-flex">
    <!-- product > category > maptopic > article -->
<div class="sidebar d-none d-lg-block">

  <div class="d-flex flex-items-center p-4 position-sticky top-0 sidebar-background-color" style="z-index: 3;" id="github-logo" role="banner">
    <a href="https://docs.github.com/en" class="text-white" aria-hidden="true" tabindex="-1">
      <svg version="1.1" width="32" height="32" viewBox="0 0 16 16" class="octicon octicon-mark-github" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
    </a>
    <a href="https://docs.github.com/en" class="h4-mktg text-white no-underline no-wrap pl-2 flex-auto">GitHub Docs</a>
  </div>

  <nav>
    
    <ul class="sidebar-products">
      <!--
  Styling note:

  Categories, Maptopics, and Articles list items get a class of `active` when they correspond to content
  hierarchy of the current page. If an item's URL is also the same as the current URL, the item
  also gets an `is-current-page` class.
 -->



<li title="Home">
  <a href="https://docs.github.com/en" class="f6 pl-4 pr-5 ml-n1 pb-1">
    <svg xmlns="http://www.w3.org/2000/svg" class="octicon" viewBox="0 0 16 16" width="16" height="16">  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.78033 12.5303C7.48744 12.8232 7.01256 12.8232 6.71967 12.5303L2.46967 8.28033C2.17678 7.98744 2.17678 7.51256 2.46967 7.21967L6.71967 2.96967C7.01256 2.67678 7.48744 2.67678 7.78033 2.96967C8.07322 3.26256 8.07322 3.73744 7.78033 4.03033L4.81066 7L12.25 7C12.6642 7 13 7.33579 13 7.75C13 8.16421 12.6642 8.5 12.25 8.5L4.81066 8.5L7.78033 11.4697C8.07322 11.7626 8.07322 12.2374 7.78033 12.5303Z"></path></svg>
    All products
  </a>
</li>


<li title="Developers" class="sidebar-product mb-2">
  
  <a href="https://docs.github.com/en/developers" class="pl-4 pr-5 pb-1 f4">Developers</a>
  
</li>
<li>
<ul class="sidebar-categories list-style-none">
  
  

  <li class="sidebar-category py-1 ">
    
    <details class="dropdown-withArrow details details-reset" open>
      <summary>
        <div class="d-flex flex-justify-between">
          <a href="https://docs.github.com/en/developers/overview" class="pl-4 pr-2 py-2 f6 text-uppercase d-block flex-auto mr-3">Overview</a>
          
          <svg xmlns="http://www.w3.org/2000/svg" class="octicon flex-shrink-0 arrow mr-3" style="margin-top:7px" viewBox="0 0 16 16" width="16" height="16"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></svg>
          
        </div>
      </summary>
    
      <!-- some categories have maptopics with child articles -->
      
      
      <ul class="sidebar-articles list-style-none">
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/about-githubs-apis" class="pl-4 pr-5 py-1">About GitHub's APIs</a>
        </li>
        
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/managing-deploy-keys" class="pl-4 pr-5 py-1">Managing deploy keys</a>
        </li>
        
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/viewing-deployment-history" class="pl-4 pr-5 py-1">Viewing deployment history</a>
        </li>
        
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/using-ssh-agent-forwarding" class="pl-4 pr-5 py-1">Using SSH agent forwarding</a>
        </li>
        
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/secret-scanning" class="pl-4 pr-5 py-1">Secret scanning</a>
        </li>
        
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/replacing-github-services" class="pl-4 pr-5 py-1">Replacing GitHub Services</a>
        </li>
        
        
        
        
        <li class="sidebar-article ">
          <a href="https://docs.github.com/en/developers/overview/github-developer-program" class="pl-4 pr-5 py-1 pb-2">GitHub Developer Program</a>
        </li>
        
        
      </ul>
      
      
    </details>
  </li>
  
  

  <li class="sidebar-category py-1 ">
    
    <details class="dropdown-withArrow details details-reset" open>
      <summary>
        <div class="d-flex flex-justify-between">
          <a href="https://docs.github.com/en/developers/webhooks-and-events" class="pl-4 pr-2 py-2 f6 text-uppercase d-block flex-auto mr-3">Webhooks and events</a>
          
          <svg xmlns="http://www.w3.org/2000/svg" class="octicon flex-shrink-0 arrow mr-3" style="margin-top:7px" viewBox="0 0 16 16" width="16" height="16"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></svg>
          
        </div>
      </summary>
    
      <!-- some categories have maptopics with child articles -->
      
      
      <ul class="sidebar-topics list-style-none position-relative">
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/webhooks-and-events/webhooks" class="pl-4 pr-5 py-2">Webhooks</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/about-webhooks" class="pl-6 pr-5 py-1">About webhooks</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/creating-webhooks" class="pl-6 pr-5 py-1">Creating webhooks</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/configuring-your-server-to-receive-payloads" class="pl-6 pr-5 py-1">Configuring your server to receive payloads</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/testing-webhooks" class="pl-6 pr-5 py-1">Testing webhooks</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/securing-your-webhooks" class="pl-6 pr-5 py-1">Securing your webhooks</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/webhook-events-and-payloads" class="pl-6 pr-5 py-1 pb-2">Webhook events and payloads</a>
                </li>
                
                
              </ul>
            </li>
          
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/webhooks-and-events/events" class="pl-4 pr-5 py-2">Events</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/github-event-types" class="pl-6 pr-5 py-1">GitHub event types</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/webhooks-and-events/issue-event-types" class="pl-6 pr-5 py-1 pb-2">Issue event types</a>
                </li>
                
                
              </ul>
            </li>
          
        
      </ul>
      <!-- some categories have no maptopics, only articles -->
      
      
    </details>
  </li>
  
  

  <li class="sidebar-category py-1 active ">
    
    <details class="dropdown-withArrow details details-reset" open>
      <summary>
        <div class="d-flex flex-justify-between">
          <a href="https://docs.github.com/en/developers/apps" class="pl-4 pr-2 py-2 f6 text-uppercase d-block flex-auto mr-3">Apps</a>
          
          <svg xmlns="http://www.w3.org/2000/svg" class="octicon flex-shrink-0 arrow mr-3" style="margin-top:7px" viewBox="0 0 16 16" width="16" height="16"> <path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></svg>
          
        </div>
      </summary>
    
      <!-- some categories have maptopics with child articles -->
      
      
      <ul class="sidebar-topics list-style-none position-relative">
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/apps/getting-started-with-apps" class="pl-4 pr-5 py-2">Getting started with apps</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/about-apps" class="pl-6 pr-5 py-1">About apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/activating-optional-features-for-apps" class="pl-6 pr-5 py-1">Activating optional features for apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/differences-between-github-apps-and-oauth-apps" class="pl-6 pr-5 py-1">Differences between GitHub Apps and OAuth Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/migrating-oauth-apps-to-github-apps" class="pl-6 pr-5 py-1">Migrating OAuth Apps to GitHub Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/setting-up-your-development-environment-to-create-a-github-app" class="pl-6 pr-5 py-1 pb-2">Setting up your development environment to create a GitHub App</a>
                </li>
                
                
              </ul>
            </li>
          
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/apps/building-github-apps" class="pl-4 pr-5 py-2">Building GitHub Apps</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/creating-a-github-app" class="pl-6 pr-5 py-1">Creating a GitHub App</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/setting-permissions-for-github-apps" class="pl-6 pr-5 py-1">Setting permissions for GitHub Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/authenticating-with-github-apps" class="pl-6 pr-5 py-1">Authenticating with GitHub Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/identifying-and-authorizing-users-for-github-apps" class="pl-6 pr-5 py-1">Identifying and authorizing users for GitHub Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/rate-limits-for-github-apps" class="pl-6 pr-5 py-1">Rate limits for GitHub Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/refreshing-user-to-server-access-tokens" class="pl-6 pr-5 py-1">Refreshing user-to-server access tokens</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/creating-a-github-app-from-a-manifest" class="pl-6 pr-5 py-1">Creating a GitHub App from a manifest</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/creating-a-github-app-using-url-parameters" class="pl-6 pr-5 py-1">Creating a GitHub App using URL parameters</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/creating-a-custom-badge-for-your-github-app" class="pl-6 pr-5 py-1 pb-2">Creating a custom badge for your GitHub App</a>
                </li>
                
                
              </ul>
            </li>
          
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/apps/managing-github-apps" class="pl-4 pr-5 py-2">Managing GitHub Apps</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/installing-github-apps" class="pl-6 pr-5 py-1">Installing GitHub Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/modifying-a-github-app" class="pl-6 pr-5 py-1">Modifying a GitHub App</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/editing-a-github-apps-permissions" class="pl-6 pr-5 py-1">Editing a GitHub App's permissions</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/making-a-github-app-public-or-private" class="pl-6 pr-5 py-1">Making a GitHub App public or private</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/suspending-a-github-app-installation" class="pl-6 pr-5 py-1">Suspending a GitHub App installation</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/transferring-ownership-of-a-github-app" class="pl-6 pr-5 py-1">Transferring ownership of a GitHub App</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/deleting-a-github-app" class="pl-6 pr-5 py-1 pb-2">Deleting a GitHub App</a>
                </li>
                
                
              </ul>
            </li>
          
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/apps/building-oauth-apps" class="pl-4 pr-5 py-2">Building OAuth Apps</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/creating-an-oauth-app" class="pl-6 pr-5 py-1">Creating an OAuth App</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/authorizing-oauth-apps" class="pl-6 pr-5 py-1">Authorizing OAuth Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/scopes-for-oauth-apps" class="pl-6 pr-5 py-1">Scopes for OAuth Apps</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/creating-a-custom-badge-for-your-oauth-app" class="pl-6 pr-5 py-1 pb-2">Creating a custom badge for your OAuth App</a>
                </li>
                
                
              </ul>
            </li>
          
        
          
            

            <li class="sidebar-maptopic ">
              <a href="https://docs.github.com/en/developers/apps/managing-oauth-apps" class="pl-4 pr-5 py-2">Managing OAuth Apps</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/modifying-an-oauth-app" class="pl-6 pr-5 py-1">Modifying an OAuth App</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/transferring-ownership-of-an-oauth-app" class="pl-6 pr-5 py-1">Transferring ownership of an OAuth App</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/troubleshooting-authorization-request-errors" class="pl-6 pr-5 py-1">Troubleshooting authorization request errors</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/troubleshooting-oauth-app-access-token-request-errors" class="pl-6 pr-5 py-1">Troubleshooting OAuth App access token request errors</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/deleting-an-oauth-app" class="pl-6 pr-5 py-1 pb-2">Deleting an OAuth App</a>
                </li>
                
                
              </ul>
            </li>
          
        
          
            

            <li class="sidebar-maptopic active ">
              <a href="https://docs.github.com/en/developers/apps/guides" class="pl-4 pr-5 py-2">Guides</a>
              <ul class="sidebar-articles my-2">
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/using-the-github-api-in-your-app" class="pl-6 pr-5 py-1">Using the GitHub API in your app</a>
                </li>
                
                
                
                

                <li class="sidebar-article ">
                  <a href="https://docs.github.com/en/developers/apps/using-content-attachments" class="pl-6 pr-5 py-1">Using content attachments</a>
                </li>
                
                
                
                

                <li class="sidebar-article active is-current-page">
                  <a href="https://docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api" class="pl-6 pr-5 py-1 pb-2">Creating CI tests with the Checks API</a>
                </li>
                
                
              </ul>
            </li>
          
        
      </ul>
      <!-- some categories have no maptopics, only articles -->
      
      
    </details>
  </li>
  
  

  <li class="sidebar-category py-1 ">
    
    <details class="dropdown-withArrow details details-reset" >
      <summary>
        <div class="d-flex flex-justify-between">
          <a href="https://docs.github.com/en/developers/github-marketplace" class="pl-4 pr-2 py-2 f6 text-uppercase d-block flex-auto mr-3">GitHub Marketplace</a>
          
        </div>
      </summary>
    
      <!-- some categories have maptopics with child articles -->
      
    </details>
  </li>
  
</ul>
</li>

    </ul>
    
  </nav>
</div>


    <main class="width-full">
      <div class="border-bottom border-gray-light no-print">
  
  <!-- START TRANSLATIONS NOTICES -->

<!-- END TRANSLATIONS NOTICES -->

<!-- START RELEASE NOTICES -->
<!-- Custom GitHub AE notice -->

<!-- END RELEASE NOTICES -->

<!-- ONEOFF EARLY ACCESS NOTICE -->

<!-- END ONEOFF EARLY ACCESS NOTICE -->






  

  <header class="container-xl px-3 px-md-6 pt-3 pb-2 position-relative d-flex flex-justify-between width-full ">

    <div class="d-flex flex-items-center d-lg-none" style="z-index: 3;" id="github-logo-mobile" role="banner">
      <a href="https://docs.github.com/en" aria-hidden="true" tabindex="-1">
        <svg version="1.1" width="32" height="32" viewBox="0 0 16 16" class="octicon octicon-mark-github text-black" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
      </a>
      <a href="https://docs.github.com/en" class="h4-mktg text-gray-dark no-underline no-wrap pl-2">GitHub Docs</a>
    </div>

    <div class="width-full">
      <div class="d-inline-block width-full d-md-flex" style="z-index: 1;">
        <button class="nav-mobile-burgerIcon float-right mt-1 border-0 d-md-none" type="button" aria-label="Toggle navigation">
          <!-- Hamburger icon added with css -->
        </button>
        <div style="z-index: 2;" class="nav-mobile-dropdown width-full">
          <div class="d-md-flex flex-justify-between flex-items-center">
            <div class="py-2 py-md-0 d-md-inline-block">
              <h4 class="text-mono f5 text-normal text-gray d-md-none">Explore by product</h4>
              <details class="dropdown-withArrow position-relative details details-reset d-md-none close-when-clicked-outside">
                <summary class="nav-desktop-productDropdownButton text-blue-mktg py-2" role="button" aria-label="Toggle products list">
                  <div id="current-product" class="d-flex flex-items-center flex-justify-between" style="padding-top: 2px;">
                    <!-- Product switcher - GitHub.com, Enterprise Server, etc -->
                    <!-- 404 and 500 error layouts are not real pages so we need to hardcode the name for those -->
                    Developers
                    <svg class="arrow ml-md-1" width="14px" height="8px" viewBox="0 0 14 8" xml:space="preserve" fill="none" stroke="#1277eb"><path d="M1,1l6.2,6L13,1"></path></svg>
                  </div>
                </summary>
                <!-- Mobile-only product dropdown -->
                <div id="homepages" class="position-md-absolute nav-desktop-productDropdown p-md-4 left-md-n4 top-md-6" style="z-index: 6;">
                  
                  <a href="https://docs.github.com/en/github"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub.com
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/enterprise-server@3.0/admin"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Enterprise Administrators
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/organizations"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Organizations
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/code-security"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Code security
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/actions"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub Actions
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/packages"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub Packages
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/developers"
                      class="d-block py-2
                      text-blue-mktg text-underline active">
                      Developers
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/rest"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      REST API
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/graphql"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GraphQL API
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/enterprise-server@3.0/insights"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub Insights
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/discussions"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub Discussions
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/communities"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Building communities
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/pages"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub Pages
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/education"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Education
                      
                  </a>
                  
                  <a href="https://docs.github.com/en/desktop"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub Desktop
                      
                  </a>
                  
                  <a href="https://cli.github.com/manual"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      GitHub CLI
                      
                      <span class="ml-1"><svg width="9" height="10" viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path stroke="#24292e" d="M.646 8.789l8-8M8.5 9V1M1 .643h8"/></svg></span>
                      
                  </a>
                  
                  <a href="https://atom.io/docs"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Atom
                      
                      <span class="ml-1"><svg width="9" height="10" viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path stroke="#24292e" d="M.646 8.789l8-8M8.5 9V1M1 .643h8"/></svg></span>
                      
                  </a>
                  
                  <a href="https://electronjs.org/docs"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      Electron
                      
                      <span class="ml-1"><svg width="9" height="10" viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path stroke="#24292e" d="M.646 8.789l8-8M8.5 9V1M1 .643h8"/></svg></span>
                      
                  </a>
                  
                  <a href="https://codeql.github.com/docs"
                      class="d-block py-2
                      link-gray-dark no-underline">
                      CodeQL
                      
                      <span class="ml-1"><svg width="9" height="10" viewBox="0 0 9 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path stroke="#24292e" d="M.646 8.789l8-8M8.5 9V1M1 .643h8"/></svg></span>
                      
                  </a>
                  
                </div>
              </details>
            </div>

            <!-- Versions picker that only appears in the header on landing pages -->
            <!-- Versions picker that only appears in the header on homepage or product landing -->



            <div class="d-md-inline-block">

              <!-- Language picker - 'English', 'Japanese', etc -->
              
                <div class="border-top border-md-top-0 py-2 py-md-0 d-md-inline-block">
                  <details class="dropdown-withArrow position-relative details details-reset mr-md-3 close-when-clicked-outside">
                    <summary class="py-2 text-gray-dark" role="button" aria-label="Toggle languages list">
                      <div class="d-flex flex-items-center flex-justify-between">
                        
                          English
                        
                        <svg class="arrow ml-md-1" width="14px" height="8px" viewBox="0 0 14 8" xml:space="preserve" fill="none" stroke="#1B1F23"><path d="M1,1l6.2,6L13,1"></path></svg>
                      </div>
                    </summary>
                    <div id="languages-selector" class="position-md-absolute nav-desktop-langDropdown p-md-4 right-md-n4 top-md-6" style="z-index: 6;">
                    
                      
                        <a
                          href="https://docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api"
                          class="d-block py-2 no-underline active link-gray"
                          style="white-space: nowrap"
                        >
                          
                            English
                          
                        </a>
                      
                    
                      
                        <a
                          href="https://docs.github.com/cn/developers/apps/creating-ci-tests-with-the-checks-api"
                          class="d-block py-2 no-underline link-gray-dark"
                          style="white-space: nowrap"
                        >
                          
                            ç®€ä½“ä¸­æ–‡ (Simplified Chinese)
                          
                        </a>
                      
                    
                      
                        <a
                          href="https://docs.github.com/ja/developers/apps/creating-ci-tests-with-the-checks-api"
                          class="d-block py-2 no-underline link-gray-dark"
                          style="white-space: nowrap"
                        >
                          
                            æ—¥æœ¬èªž (Japanese)
                          
                        </a>
                      
                    
                      
                        <a
                          href="https://docs.github.com/es/developers/apps/creating-ci-tests-with-the-checks-api"
                          class="d-block py-2 no-underline link-gray-dark"
                          style="white-space: nowrap"
                        >
                          
                            EspaÃ±ol (Spanish)
                          
                        </a>
                      
                    
                      
                        <a
                          href="https://docs.github.com/pt/developers/apps/creating-ci-tests-with-the-checks-api"
                          class="d-block py-2 no-underline link-gray-dark"
                          style="white-space: nowrap"
                        >
                          
                            PortuguÃªs do Brasil (Portuguese)
                          
                        </a>
                      
                    
                      
                    
                    </div>
                  </details>
                </div>
              

              <!-- GitHub.com homepage and 404 page has a stylized search; Enterprise homepages do not -->
              
              <div class="pt-3 pt-md-0 d-md-inline-block ml-md-3 border-top border-md-top-0">
                <!--
  This form is used in two places:

  - On the homepage, front and center
  - On all other pages, in the header
 -->

<div id="search-input-container" aria-hidden="true">
  <!-- will add a search input here -->
</div>

                <div id="search-results-container"></div>
                <div class="search-overlay-desktop"></div>
              </div>
              

            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
</div>

      

      
        <div class="container-xl px-3 px-md-6 my-4 my-lg-4 d-xl-flex">
  <article class="markdown-body width-full">
    <div class="d-lg-flex flex-justify-between">
      <div class="d-block d-lg-none">
  <details class="dropdown-withArrow d-inline-block details details-reset mb-1 position-relative close-when-clicked-outside article-versions">
    <summary class="f4 h5-mktg btn-outline-mktg btn-mktg p-2">
      <!-- GitHub.com, Enterprise Server 2.16, etc -->
      <span class="d-md-none d-xl-inline-block">Article version:</span> GitHub.com
      <svg class="arrow ml-1" width="14px" height="8px" viewBox="0 0 14 8" xml:space="preserve" fill="none" stroke="#1277eb"><path d="M1,1l6.2,6L13,1"></path></svg>
    </summary>

    <div class="nav-dropdown position-absolute bg-white rounded-1 px-4 py-3 top-7 box-shadow-large" style="z-index: 6; width: 210px;">
      
      <a
      href="https://docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-blue active"
      >
      GitHub.com</a>
      
      <a
      href="https://docs.github.com/en/enterprise-server@3.0/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      Enterprise Server 3.0</a>
      
      <a
      href="https://docs.github.com/en/enterprise-server@2.22/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      Enterprise Server 2.22</a>
      
      <a
      href="https://docs.github.com/en/enterprise-server@2.21/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      Enterprise Server 2.21</a>
      
      <a
      href="https://docs.github.com/en/github-ae@latest/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      GitHub AE</a>
      
      <a class="f6 no-underline text-gray-light pt-1" href="https://docs.github.com/enterprise-server-releases">See all Enterprise releases</a>
    </div>
  </details>

</div>
      <div class="d-flex flex-items-center breadcrumbs-wrapper">
        <nav class="breadcrumbs f5" aria-label="Breadcrumb">
  
    
      <a title="product: Developers" href="https://docs.github.com/en/developers" class="d-inline-block ">
        Developers
      </a>
    
  
    
      <a title="category: Apps" href="https://docs.github.com/en/developers/apps" class="d-inline-block ">
        Apps
      </a>
    
  
    
      <a title="maptopic: Guides" href="https://docs.github.com/en/developers/apps/guides" class="d-inline-block ">
        Guides
      </a>
    
  
    
      <a title="article: Creating CI tests with the Checks API" href="https://docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api" class="d-inline-block text-gray-light">
        Creating CI tests with the Checks API
      </a>
    
  
</nav>

      </div>
      <div class="d-none d-lg-block">
  <details class="dropdown-withArrow d-inline-block details details-reset mb-1 position-relative close-when-clicked-outside article-versions">
    <summary class="f4 h5-mktg btn-outline-mktg btn-mktg p-2">
      <!-- GitHub.com, Enterprise Server 2.16, etc -->
      <span class="d-md-none d-xl-inline-block">Article version:</span> GitHub.com
      <svg class="arrow ml-1" width="14px" height="8px" viewBox="0 0 14 8" xml:space="preserve" fill="none" stroke="#1277eb"><path d="M1,1l6.2,6L13,1"></path></svg>
    </summary>

    <div class="nav-dropdown position-absolute bg-white rounded-1 px-4 py-3 top-7 box-shadow-large" style="z-index: 6; width: 210px;">
      
      <a
      href="https://docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-blue active"
      >
      GitHub.com</a>
      
      <a
      href="https://docs.github.com/en/enterprise-server@3.0/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      Enterprise Server 3.0</a>
      
      <a
      href="https://docs.github.com/en/enterprise-server@2.22/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      Enterprise Server 2.22</a>
      
      <a
      href="https://docs.github.com/en/enterprise-server@2.21/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      Enterprise Server 2.21</a>
      
      <a
      href="https://docs.github.com/en/github-ae@latest/developers/apps/creating-ci-tests-with-the-checks-api"
      class="d-block py-2 link-gray-dark no-underline"
      >
      GitHub AE</a>
      
      <a class="f6 no-underline text-gray-light pt-1" href="https://docs.github.com/enterprise-server-releases">See all Enterprise releases</a>
    </div>
  </details>

</div>
    </div>

    <div class="mt-2 article-grid-container">

    <div class="article-grid-head">
      <div class="d-flex flex-items-baseline flex-justify-between mt-3">
        <h1 class="border-bottom-0">Creating CI tests with the Checks API</h1>
        <div class="d-none d-lg-block ml-2">
          <button class="btn-link link-gray js-print tooltipped tooltipped-n" aria-label="Print this article">
            <!-- From https://heroicons.dev/ -->
<svg fill="none" height="18" width="18" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
          </button>
        </div>
      </div>

      

      
        <div class="lead-mktg"><p>Build a continuous integration server to run tests using a GitHub App and the Checks API.</p></div>
      

      

      

      
    </div>
    <div class="article-grid-toc border-bottom border-xl-0 pb-4 mb-5 pb-xl-0 mb-xl-0">
      <div class="article-grid-toc-content">
        
        <h2 id="in-this-article" class="f5 mb-2"><a class="link-gray-dark" href="#in-this-article">In this article</a></h2>
        <ul class="list-style-none pl-0 f5 mb-0">
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#introduction">Introduction</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#prerequisites">Prerequisites</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#part-1-creating-the-checks-api-interface">Part 1. Creating the Checks API interface</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-11-updating-app-permissions">Step 1.1. Updating app permissions</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-12-adding-event-handling">Step 1.2. Adding event handling</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-13-creating-a-check-run">Step 1.3. Creating a check run</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-14-updating-a-check-run">Step 1.4. Updating a check run</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#part-2-creating-the-octo-rubocop-ci-test">Part 2. Creating the Octo RuboCop CI test</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-21-adding-a-ruby-file">Step 2.1. Adding a Ruby file</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-22-cloning-the-repository">Step 2.2. Cloning the repository</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-23-running-rubocop">Step 2.3. Running RuboCop</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-24-collecting-rubocop-errors">Step 2.4. Collecting RuboCop errors</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-25-updating-the-check-run-with-ci-test-results">Step 2.5. Updating the check run with CI test results</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-26-automatically-fixing-rubocop-errors">Step 2.6. Automatically fixing RuboCop errors</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#step-27-security-tips">Step 2.7. Security tips</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#troubleshooting">Troubleshooting</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#conclusion">Conclusion</a></li>
          
          <li class="ml-0  mb-2 lh-condensed"><a href="#next-steps">Next steps</a></li>
          
        </ul>
        
      </div>
    </div>
    <div id="article-contents" class="article-grid-body">
      
      <h3 id="introduction"><a href="#introduction">Introduction</a></h3>
<p>This guide will introduce you to <a href="https://docs.github.com/en/apps">GitHub Apps</a> and the <a href="https://docs.github.com/en/rest/reference/checks">Checks API</a>, which you'll use to build a continuous integration (CI) server that runs tests.</p>
<p>CI is a software practice that requires frequently committing code to a shared repository. Committing code more often raises errors sooner and reduces the amount of code a developer needs to debug when finding the source of an error. Frequent code updates also make it easier to merge changes from different members of a software development team. This is great for developers, who can spend more time writing code and less time debugging errors or resolving merge conflicts. ðŸ™Œ</p>
<p>A CI server hosts code that runs CI tests such as code linters (which check style formatting), security checks, code coverage, and other checks against new code commits in a repository. CI servers can even build and deploy code to staging or production servers. For some examples of the types of CI tests you can create with a GitHub App, check out the <a href="https://github.com/marketplace/category/continuous-integration">continuous integration apps</a> available in GitHub Marketplace.</p>
<div class="extended-markdown note border rounded-1 mb-4 p-3 border-blue bg-blue-light f5">
<p><strong>Note:</strong> This guide demonstrates the app development process using the Ruby programming language. However, there are many <a href="https://docs.github.com/en/rest/overview/libraries">flavors of Octokit</a>. If you prefer JavaScript, you can use <a href="https://probot.github.io/">Probot</a> and <a href="https://octokit.github.io/rest.js/">Node.js</a> to develop GitHub Apps.</p>
</div>
<h4 id="checks-api-overview"><a href="#checks-api-overview">Checks API overview</a></h4>
<p>The <a href="https://docs.github.com/en/rest/reference/checks">Checks API</a> allows you to set up CI tests that are automatically run against each code commit in a repository. The Checks API reports detailed information about each check on GitHub in the pull request's <strong>Checks</strong> tab. With the Checks API, you can create annotations with additional details for specific lines of code. Annotations are visible in the <strong>Checks</strong> tab. When you create an annotation for a file that is part of the pull request, the annotations are also shown in the <strong>Files changed</strong> tab.</p>
<p>A <em>check suite</em> is a group of <em>check runs</em> (individual CI tests). Both the suite and the runs contain <em>statuses</em> that are visible in a pull request on GitHub. You can use statuses to determine when a code commit introduces errors. Using these statuses with <a href="https://docs.github.com/en/rest/reference/repos#branches">protected branches</a> can prevent people from merging pull requests prematurely. See "<a href="https://docs.github.com/en/github/administering-a-repository/about-protected-branches#require-status-checks-before-merging">About protected branches</a>" for more details.</p>
<p>The Checks API sends the <a href="https://docs.github.com/en/webhooks/event-payloads/#check_suite"><code>check_suite</code> webhook event</a> to all GitHub Apps installed on a repository each time new code is pushed to the repository. To receive all Checks API event actions, the app must have the <code>checks:write</code> permission. GitHub automatically creates <code>check_suite</code> events for new code commits in a repository using the default flow, although <a href="https://docs.github.com/en/rest/reference/checks#update-repository-preferences-for-check-suites">Update repository preferences for check suites</a> if you'd like. Here's how the default flow works:</p>
<ol>
<li>Whenever someone pushes code to the repository, GitHub sends the <code>check_suite</code> event with an action of <code>requested</code> to all GitHub Apps installed on the repository that have the <code>checks:write</code> permission. This event lets the apps know that code was pushed and that GitHub has automatically created a new check suite.</li>
<li>When your app receives this event, it can <a href="https://docs.github.com/en/rest/reference/checks#create-a-check-run">add check runs</a> to that suite.</li>
<li>Your check runs can include <a href="https://docs.github.com/en/rest/reference/checks#annotations-object">annotations</a> that are displayed on specific lines of code.</li>
</ol>
<p><strong>In this guide, you'll learn how to:</strong></p>
<ul>
<li>Part 1: Set up the framework for a CI server using the Checks API.<ul>
<li>Configure a GitHub App as a server that receives Checks API events.</li>
<li>Create new check runs for CI tests when a repository receives newly pushed commits.</li>
<li>Re-run check runs when a user requests that action on GitHub.</li>
</ul></li>
<li>Part 2: Build on the CI server framework you created by adding a linter CI test.<ul>
<li>Update a check run with a <code>status</code>, <code>conclusion</code>, and <code>output</code> details.</li>
<li>Create annotations on lines of code that GitHub displays in the <strong>Checks</strong> and <strong>Files Changed</strong> tab of a pull request.</li>
<li>Automatically fix linter recommendations by exposing a "Fix this" button in the <strong>Checks</strong> tab of the pull request.</li>
</ul></li>
</ul>
<p>To get an idea of what your Checks API CI server will do when you've completed this quickstart, check out the demo below:</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_checks_api_ci_server.gif" alt="Demo of Checks API CI sever quickstart"></p>
<h3 id="prerequisites"><a href="#prerequisites">Prerequisites</a></h3>
<p>Before you get started, you may want to familiarize yourself with <a href="https://docs.github.com/en/apps">GitHub Apps</a>, <a href="https://docs.github.com/en/webhooks">Webhooks</a>, and the <a href="https://docs.github.com/en/rest/reference/checks">Checks API</a>, if you're not already. You'll find more APIs in the <a href="https://docs.github.com/en/rest">REST API docs</a>. The Checks API is also available to use in <a href="https://docs.github.com/en/graphql">GraphQL</a>, but this quickstart focuses on REST. See the GraphQL <a href="https://docs.github.com/en/graphql/reference/objects#checksuite">Checks Suite</a> and <a href="https://docs.github.com/en/graphql/reference/objects#checkrun">Check Run</a> objects for more details.</p>
<p>You'll use the <a href="https://www.ruby-lang.org/en/">Ruby programming language</a>, the <a href="https://smee.io/">Smee</a> webhook payload delivery service, the <a href="http://octokit.github.io/octokit.rb/">Octokit.rb Ruby library</a> for the GitHub REST API, and the <a href="http://sinatrarb.com/">Sinatra web framework</a> to create your Checks API CI server app.</p>
<p>You don't need to be an expert in any of these tools or concepts to complete this project. This guide will walk you through all the required steps. Before you begin creating CI tests with the Checks API, you'll need to do the following:</p>
<ol>
<li>
<p>Clone the <a href="https://github.com/github-developer/creating-ci-tests-with-the-checks-api">Creating CI tests with the Checks API</a> repository.</p>
<pre><code class="hljs language-shell">$ git clone https://github.com/github-developer/creating-ci-tests-with-the-checks-api.git</code></pre>
<p>Inside the directory, you'll find a <code>template_server.rb</code> file with the template code you'll use in this quickstart and a <code>server.rb</code> file with the completed project code.</p>
</li>
<li>
<p>Follow the steps in the "<a href="https://docs.github.com/en/apps/quickstart-guides/setting-up-your-development-environment">Setting up your development environment</a>" quickstart to configure and run the app server. <strong>Note:</strong> Instead of <a href="https://docs.github.com/en/apps/quickstart-guides/setting-up-your-development-environment/#prerequisites">cloning the GitHub App template repository</a>, use the <code>template_server.rb</code> file in the repository you cloned in the previous step in this quickstart.</p>
<p>If you've completed a GitHub App quickstart before, make sure to register a <em>new</em> GitHub App and start a new Smee channel to use with this quickstart.</p>
<p>See the <a href="https://docs.github.com/en/apps/quickstart-guides/setting-up-your-development-environment/#troubleshooting">troubleshooting</a> section if you are running into problems setting up your template GitHub App.</p>
</li>
</ol>
<h3 id="part-1-creating-the-checks-api-interface"><a href="#part-1-creating-the-checks-api-interface">Part 1. Creating the Checks API interface</a></h3>
<p>In this part, you will add the code necessary to receive <code>check_suite</code> webhook events and create and update check runs. You'll also learn how to create check runs when a check was re-requested on GitHub. At the end of this section, you'll be able to view the check run you created in a GitHub pull request.</p>
<p>Your check run will not be performing any checks on the code in this section. You'll add that functionality in <a href="#part-2-creating-the-octo-rubocop-ci-test">Part 2: Creating the Octo RuboCop CI test</a>.</p>
<p>You should already have a Smee channel configured that is forwarding webhook payloads to your local server. Your server should be running and connected to the GitHub App you registered and installed on a test repository. If you haven't completed the steps in "<a href="https://docs.github.com/en/apps/quickstart-guides/setting-up-your-development-environment">Setting up your development environment</a>," you'll need to do that before you can continue.</p>
<p>Let's get started! These are the steps you'll complete in Part 1:</p>
<ol>
<li><a href="#step-11-updating-app-permissions">Updating app permissions</a></li>
<li><a href="#step-12-adding-event-handling">Adding event handling</a></li>
<li><a href="#step-13-creating-a-check-run">Creating a check run</a></li>
<li><a href="#step-14-updating-a-check-run">Updating a check run</a></li>
</ol>
<h3 id="step-11-updating-app-permissions"><a href="#step-11-updating-app-permissions">Step 1.1. Updating app permissions</a></h3>
<p>When you <a href="#prerequisites">first registered your app</a>, you accepted the default permissions, which means your app doesn't have access to most resources. For this example, your app will need permission to read and write checks.</p>
<p>To update your app's permissions:</p>
<ol>
<li>Select your app from the <a href="https://github.com/settings/apps">app settings page</a> and click <strong>Permissions &#x26; Webhooks</strong> in the sidebar.</li>
<li>In the "Permissions" section, find "Checks", and select <strong>Read &#x26; write</strong> in the Access dropdown next to it.</li>
<li>In the "Subscribe to events" section, select <strong>Check suite</strong> and <strong>Check run</strong> to subscribe to these events.</li>
<li>Click <strong>Save changes</strong> at the bottom of the page.</li>
<li>If you've installed the app on your account, check your email and follow the link to accept the new permissions. Any time you change your app's permissions or webhooks, users who have installed the app (including yourself) will need to accept the new permissions before the changes take effect. You can also accept the new permissions by navigating to your <a href="https://github.com/settings/installations">installations page</a> and clicking on "Configure" next to your app. You'll see a banner at the top of the page letting you know that the app is requesting different permissions. Click "Details" and click "Accept new permissions."</li>
</ol>
<p>Great! Your app has permission to do the tasks you want it to do. Now you can add the code to handle the events.</p>
<h3 id="step-12-adding-event-handling"><a href="#step-12-adding-event-handling">Step 1.2. Adding event handling</a></h3>
<p>Now that your app is subscribed to the <strong>Check suite</strong> and <strong>Check run</strong> events, it will start receiving the <a href="https://docs.github.com/en/webhooks/event-payloads/#check_suite"><code>check_suite</code></a> and <a href="https://docs.github.com/en/webhooks/event-payloads/#check_run"><code>check_run</code></a> webhooks. GitHub sends webhook payloads as <code>POST</code> requests. Because you forwarded your Smee webhook payloads to <code>http://localhost/event_handler:3000</code>, your server will receive the <code>POST</code> request payloads at the <code>post '/event_handler'</code> route.</p>
<p>An empty <code>post '/event_handler'</code> route is already included in the <code>template_server.rb</code> file, which you downloaded in the <a href="#prerequisites">prerequisites</a> section. The empty route looks like this:</p>
<pre><code class="hljs language-ruby">  post <span class="hljs-string">'/event_handler'</span> <span class="hljs-keyword">do</span>

    <span class="hljs-comment"># # # # # # # # # # # #</span>
    <span class="hljs-comment"># ADD YOUR CODE HERE  #</span>
    <span class="hljs-comment"># # # # # # # # # # # #</span>

    <span class="hljs-number">200</span> <span class="hljs-comment"># success status</span>
  <span class="hljs-keyword">end</span>
</code></pre>
<p>Use this route to handle the <code>check_suite</code> event by adding the following code:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Get the event type from the HTTP_X_GITHUB_EVENT header</span>
<span class="hljs-keyword">case</span> request.env[<span class="hljs-string">'HTTP_X_GITHUB_EVENT'</span>]
<span class="hljs-keyword">when</span> <span class="hljs-string">'check_suite'</span>
  <span class="hljs-comment"># A new check_suite has been created. Create a new check run with status queued</span>
  <span class="hljs-keyword">if</span> @payload[<span class="hljs-string">'action'</span>] == <span class="hljs-string">'requested'</span> <span class="hljs-params">||</span> @payload[<span class="hljs-string">'action'</span>] == <span class="hljs-string">'rerequested'</span>
    create_check_run
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Every event that GitHub sends includes a request header called <code>HTTP_X_GITHUB_EVENT</code>, which indicates the type of event in the <code>POST</code> request. Right now, you're only interested in events of type <code>check_suite</code>, which are emitted when a new check suite is created. Each event has an additional <code>action</code> field that indicates the type of action that triggered the events. For <code>check_suite</code>, the <code>action</code> field can be <code>requested</code>, <code>rerequested</code>, or <code>completed</code>.</p>
<p>The <code>requested</code> action requests a check run each time code is pushed to the repository, while the <code>rerequested</code> action requests that you re-run a check for code that already exists in the repository. Because both the <code>requested</code> and <code>rerequested</code> actions require creating a check run, you'll call a helper called <code>create_check_run</code>. Let's write that method now.</p>
<h3 id="step-13-creating-a-check-run"><a href="#step-13-creating-a-check-run">Step 1.3. Creating a check run</a></h3>
<p>You'll add this new method as a <a href="https://github.com/sinatra/sinatra#helpers">Sinatra helper</a> in case you want other routes to use it too. Under <code>helpers do</code>, add this <code>create_check_run</code> method:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Create a new check run with the status queued</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">create_check_run</span></span>
  <span class="hljs-comment"># # At the time of writing, Octokit does not support the Checks API yet, but</span>
  <span class="hljs-comment"># it does provide generic HTTP methods you can use:</span>
  <span class="hljs-comment"># /rest/reference/checks#create-a-check-run</span>
  check_run = @installation_client.post(
    <span class="hljs-string">"repos/<span class="hljs-subst">#{@payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]}</span>/check-runs"</span>,
    {
      <span class="hljs-symbol">accept:</span> <span class="hljs-string">'application/vnd.github.v3+json'</span>,
      <span class="hljs-comment"># The name of your check run.</span>
      <span class="hljs-symbol">name:</span> <span class="hljs-string">'Octo RuboCop'</span>,
      <span class="hljs-comment"># The payload structure differs depending on whether a check run or a check suite event occurred.</span>
      <span class="hljs-symbol">head_sha:</span> @payload[<span class="hljs-string">'check_run'</span>].<span class="hljs-literal">nil</span>? ? @payload[<span class="hljs-string">'check_suite'</span>][<span class="hljs-string">'head_sha'</span>] : @payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'head_sha'</span>]
    }
  )
<span class="hljs-keyword">end</span>
</code></pre>
<p>This code calls the "<a href="https://docs.github.com/en/rest/reference/checks#create-a-check-run">Create a check run</a>" endpoint using the generic <a href="http://octokit.github.io/octokit.rb/Octokit/Connection.html#post-instance_method">HTTP <code>POST</code> method</a>. This method takes two parameters: the URL of the endpoint and the input parameters to the method.</p>
<p>To create a check run, only two input parameters are required: <code>name</code> and <code>head_sha</code>. We will use <a href="https://rubocop.readthedocs.io/en/latest/">Rubocop</a> to implement the CI test later in this quickstart, which is why the name "Octo Rubocop" is used here, but you can choose any name you'd like for the check run.</p>
<p>You're only supplying the required parameters now to get the basic functionality working, but you'll update the check run later as you collect more information about the check run. By default, GitHub sets the <code>status</code> to <code>queued</code>.</p>
<p>GitHub creates a check run for a specific commit SHA, which is why <code>head_sha</code> is a required parameter. You can find the commit SHA in the webhook payload. Although you're only creating a check run for the <code>check_suite</code> event right now, it's good to know that the <code>head_sha</code> is included in both the <code>check_suite</code> and <code>check_run</code> objects in the event payloads.</p>
<p>In the code above, you're using the <a href="https://ruby-doc.org/core-2.3.0/doc/syntax/control_expressions_rdoc.html#label-Ternary+if">ternary operator</a>, which works like an <code>if/else</code> statement, to check if the payload contains a <code>check_run</code> object. If it does, you read the <code>head_sha</code> from the <code>check_run</code> object, otherwise you read it from the <code>check_suite</code> object.</p>
<p>To test this code, restart the server from your terminal:</p>
<pre><code class="hljs language-shell">$ ruby template_server.rb</code></pre>
<div class="extended-markdown note border rounded-1 mb-4 p-3 border-blue bg-blue-light f5">
<p><strong>Note:</strong> You'll need to restart the Sinatra server before you can test changes. Enter <code>Ctrl-C</code> to stop the server, and then run <code>ruby template_server.rb</code> again. If you don't want to do this every time you change your app code, you can look into <a href="http://sinatrarb.com/faq.html#reloading">reloading</a>.</p>
</div>
<p>Now open a pull request in the repository where you installed your app. Your app should respond by creating a check run on your pull request. Click on the <strong>Checks</strong> tab, and you should see something like this:</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_queued_check_run.png" alt="Queued check run"></p>
<p>If you see other apps in the Checks tab, it means you have other apps installed on your repository that have <strong>Read &#x26; write</strong> access to checks and are subscribed to <strong>Check suite</strong> and <strong>Check run</strong> events.</p>
<p>Great! You've told GitHub to create a check run. You can see the check run status is set to <code>queued</code> next to a yellow icon. Next, you'll want to wait for GitHub to create the check run and update its status.</p>
<h3 id="step-14-updating-a-check-run"><a href="#step-14-updating-a-check-run">Step 1.4. Updating a check run</a></h3>
<p>When your <code>create_check_run</code> method runs, it asks GitHub to create a new check run. When GitHub finishes creating the check run, you'll receive the <code>check_run</code> webhook event with the <code>created</code> action. That event is your signal to begin running the check.</p>
<p>You'll want to update your event handler to look for the <code>created</code> action. While you're updating the event handler, you can add a conditional for the <code>rerequested</code> action. When someone re-runs a single test on GitHub by clicking the "Re-run" button, GitHub sends the <code>rerequested</code> check run event to your app. When a check run is <code>rerequested</code>, you'll want to start the process all over and create a new check run.</p>
<p>To include a condition for the <code>check_run</code> event in the <code>post '/event_handler'</code> route, add the following code under <code>case request.env['HTTP_X_GITHUB_EVENT']</code>:</p>
<pre><code class="hljs language-ruby"><span class="hljs-keyword">when</span> <span class="hljs-string">'check_run'</span>
  <span class="hljs-comment"># Check that the event is being sent to this app</span>
  <span class="hljs-keyword">if</span> @payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'app'</span>][<span class="hljs-string">'id'</span>].to_s === APP_IDENTIFIER
    <span class="hljs-keyword">case</span> @payload[<span class="hljs-string">'action'</span>]
    <span class="hljs-keyword">when</span> <span class="hljs-string">'created'</span>
      initiate_check_run
    <span class="hljs-keyword">when</span> <span class="hljs-string">'rerequested'</span>
      create_check_run
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
</code></pre>
<p>GitHub sends all events for <code>created</code> check runs to every app installed on a repository that has the necessary checks permissions. That means that your app will receive check runs created by other apps. A <code>created</code> check run is a little different from a <code>requested</code> or <code>rerequested</code> check suite, which GitHub sends only to apps that are being requested to run a check. The code above looks for the check run's application ID. This filters out all check runs for other apps on the repository.</p>
<p>Next you'll write the <code>initiate_check_run</code> method, which is where you'll update the check run status and prepare to kick off your CI test.</p>
<p>In this section, you're not going to kick off the CI test yet, but you'll walk through how to update the status of the check run from <code>queued</code> to <code>pending</code> and then from <code>pending</code> to <code>completed</code> to see the overall flow of a check run. In "<a href="#part-2-creating-the-octo-rubocop-ci-test">Part 2: Creating the Octo RuboCop CI test</a>," you'll add the code that actually performs the CI test.</p>
<p>Let's create the <code>initiate_check_run</code> method and update the status of the check run. Add the following code to the helpers section:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Start the CI process</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initiate_check_run</span></span>
  <span class="hljs-comment"># Once the check run is created, you'll update the status of the check run</span>
  <span class="hljs-comment"># to 'in_progress' and run the CI process. When the CI finishes, you'll</span>
  <span class="hljs-comment"># update the check run status to 'completed' and add the CI results.</span>

  <span class="hljs-comment"># Octokit doesn't yet support the Checks API, but it does provide generic</span>
  <span class="hljs-comment"># HTTP methods you can use:</span>
  <span class="hljs-comment"># /rest/reference/checks#update-a-check-run</span>
  updated_check_run = @installation_client.patch(
    <span class="hljs-string">"repos/<span class="hljs-subst">#{@payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]}</span>/check-runs/<span class="hljs-subst">#{@payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'id'</span>]}</span>"</span>,
    {
      <span class="hljs-symbol">accept:</span> <span class="hljs-string">'application/vnd.github.v3+json'</span>,
      <span class="hljs-symbol">name:</span> <span class="hljs-string">'Octo RuboCop'</span>,
      <span class="hljs-symbol">status:</span> <span class="hljs-string">'in_progress'</span>,
      <span class="hljs-symbol">started_at:</span> Time.now.utc.iso8601
    }
  )

  <span class="hljs-comment"># ***** RUN A CI TEST *****</span>

  <span class="hljs-comment"># Mark the check run as complete!</span>
  updated_check_run = @installation_client.patch(
    <span class="hljs-string">"repos/<span class="hljs-subst">#{@payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]}</span>/check-runs/<span class="hljs-subst">#{@payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'id'</span>]}</span>"</span>,
    {
      <span class="hljs-symbol">accept:</span> <span class="hljs-string">'application/vnd.github.v3+json'</span>,
      <span class="hljs-symbol">name:</span> <span class="hljs-string">'Octo RuboCop'</span>,
      <span class="hljs-symbol">status:</span> <span class="hljs-string">'completed'</span>,
      <span class="hljs-symbol">conclusion:</span> <span class="hljs-string">'success'</span>,
      <span class="hljs-symbol">completed_at:</span> Time.now.utc.iso8601
    }
  )
<span class="hljs-keyword">end</span>
</code></pre>
<p>The code above calls the "<a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run">Update a check run</a>" API endpoint using the generic <a href="http://octokit.github.io/octokit.rb/Octokit/Connection.html#patch-instance_method"><code>patch</code> HTTP method</a> to update the check run that you already created.</p>
<p>Here's what this code is doing. First, it updates the check run's status to <code>in_progress</code> and sets the <code>started_at</code> time to the current time. In <a href="#part-2-creating-the-octo-rubocop-ci-test">Part 2</a> of this quickstart, you'll add code that kicks off a real CI test under <code>***** RUN A CI TEST *****</code>. For now, you'll leave that section as a placeholder, so the code that follows it will just simulate that the CI process succeeds and all tests pass. Finally, the code updates the status of the check run again to <code>completed</code>.</p>
<p>You'll notice in the "<a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run">Update a check run</a>" docs that when you provide a status of <code>completed</code>, the <code>conclusion</code> and <code>completed_at</code> parameters are required. The <code>conclusion</code> summarizes the outcome of a check run and can be <code>success</code>, <code>failure</code>, <code>neutral</code>, <code>cancelled</code>, <code>timed_out</code>, or <code>action_required</code>. You'll set the conclusion to <code>success</code>, the <code>completed_at</code> time to the current time, and the status to <code>completed</code>.</p>
<p>You could also provide more details about what your check is doing, but you'll get to that in the next section. Let's test this code again by re-running <code>template_server.rb</code>:</p>
<pre><code class="hljs language-shell">$ ruby template_server.rb</code></pre>
<p>Head over to your open pull request and click the <strong>Checks</strong> tab. Click the "Re-run all" button in the upper left corner. You should see the check run move from <code>pending</code> to <code>in_progress</code> and end with <code>success</code>:</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_complete_check_run.png" alt="Completed check run"></p>
<h3 id="part-2-creating-the-octo-rubocop-ci-test"><a href="#part-2-creating-the-octo-rubocop-ci-test">Part 2. Creating the Octo RuboCop CI test</a></h3>
<p><a href="https://rubocop.readthedocs.io/en/latest/">RuboCop</a> is a Ruby code linter and formatter. It checks Ruby code to ensure that it complies with the "<a href="https://github.com/rubocop-hq/ruby-style-guide">Ruby Style Guide</a>." RuboCop has three primary functions:</p>
<ul>
<li>Linting to check code style</li>
<li>Code formatting</li>
<li>Replaces the native Ruby linting capabilities using <code>ruby -w</code></li>
</ul>
<p>Now that you've got the interface created to receive Checks API events and create check runs, you can create a check run that implements a CI test.</p>
<p>Your app will run RuboCop on the CI server and create check runs (CI tests in this case) that report the results that RuboCop reports to GitHub.</p>
<p>The Checks API allows you to report rich details about each check run, including statuses, images, summaries, annotations, and requested actions.</p>
<p>Annotations are information about specific lines of code in a repository. An annotation allows you to pinpoint and visualize the exact parts of the code you'd like to show additional information for. That information can be anything: for example, a comment, an error, or a warning. This quickstart uses annotations to visualize RuboCop errors.</p>
<p>To take advantage of requested actions, app developers can create buttons in the <strong>Checks</strong> tab of pull requests. When someone clicks one of these buttons, the click sends a <code>requested_action</code> <code>check_run</code> event to the GitHub App. The action that the app takes is completely configurable by the app developer. This quickstart will walk you through adding a button that allows users to request that RuboCop fix the errors it finds. RuboCop supports automatically fixing errors using a command-line option, and you'll configure the <code>requested_action</code> to take advantage of this option.</p>
<p>Let's get started! These are the steps you'll complete in this section:</p>
<ol>
<li><a href="#step-21-adding-a-ruby-file">Adding a Ruby file</a></li>
<li><a href="#step-22-cloning-the-repository">Cloning the repository</a></li>
<li><a href="#step-23-running-rubocop">Running RuboCop</a></li>
<li><a href="#step-24-collecting-rubocop-errors">Collecting RuboCop errors</a></li>
<li><a href="#step-25-updating-the-check-run-with-ci-test-results">Updating the check run with CI test results</a></li>
<li><a href="#step-26-automatically-fixing-rubocop-errors">Automatically fixing RuboCop errors</a></li>
<li><a href="#step-27-security-tips">Security tips</a></li>
</ol>
<h3 id="step-21-adding-a-ruby-file"><a href="#step-21-adding-a-ruby-file">Step 2.1. Adding a Ruby file</a></h3>
<p>You can pass specific files or entire directories for RuboCop to check. In this quickstart, you'll run RuboCop on an entire directory. Because RuboCop only checks Ruby code, you'll want at least one Ruby file in your repository that contains errors. The example file provided below contains a few errors. Add this example Ruby file to the repository where your app is installed (make sure to name the file with an <code>.rb</code> extension, as in <code>myfile.rb</code>):</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># The Octocat class tells you about different breeds of Octocat</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Octocat</span></span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initialize</span><span class="hljs-params">(name, *breeds)</span></span>
    <span class="hljs-comment"># Instance variables</span>
    @name = name
    @breeds = breeds
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">display</span></span>
    breed = @breeds.join(<span class="hljs-string">"-"</span>)

    puts <span class="hljs-string">"I am of <span class="hljs-subst">#{breed}</span> breed, and my name is <span class="hljs-subst">#{@name}</span>."</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

m = Octocat.new(<span class="hljs-string">"Mona"</span>, <span class="hljs-string">"cat"</span>, <span class="hljs-string">"octopus"</span>)
m.display
</code></pre>
<h3 id="step-22-cloning-the-repository"><a href="#step-22-cloning-the-repository">Step 2.2. Cloning the repository</a></h3>
<p>RuboCop is available as a command-line utility. That means your GitHub App will need to clone a local copy of the repository on the CI server so RuboCop can parse the files. To run Git operations in your Ruby app, you can use the <a href="https://github.com/ruby-git/ruby-git">ruby-git</a> gem.</p>
<p>The <code>Gemfile</code> in the <code>building-a-checks-api-ci-server</code> repository already includes the ruby-git gem, and you installed it when you ran <code>bundle install</code> in the <a href="#prerequisites">prerequisite steps</a>. To use the gem, add this code to the top of your <code>template_server.rb</code> file:</p>
<pre><code class="hljs language-ruby"><span class="hljs-keyword">require</span> <span class="hljs-string">'git'</span>
</code></pre>
<p>Your app needs read permission for "Repository contents" to clone a repository. Later in this quickstart, you'll need to push contents to GitHub, which requires write permission. Go ahead and set your app's "Repository contents" permission to <strong>Read &#x26; write</strong> now so you don't need to update it again later. To update your app's permissions:</p>
<ol>
<li>Select your app from the <a href="https://github.com/settings/apps">app settings page</a> and click <strong>Permissions &#x26; Webhooks</strong> in the sidebar.</li>
<li>In the "Permissions" section, find "Repository contents", and select <strong>Read &#x26; write</strong> in the "Access" dropdown next to it.</li>
<li>Click <strong>Save changes</strong> at the bottom of the page.</li>
<li>If you've installed the app on your account, check your email and follow the link to accept the new permissions. Any time you change your app's permissions or webhooks, users who have installed the app (including yourself) will need to accept the new permissions before the changes take effect. You can also accept the new permissions by navigating to your <a href="https://github.com/settings/installations">installations page</a> and clicking on "Configure" next to your app. You'll see a banner at the top of the page letting you know that the app is requesting different permissions. Click "Details" and click "Accept new permissions."</li>
</ol>
<p>To clone a repository using your GitHub App's permissions, you can use the app's installation token (<code>x-access-token:&#x3C;token></code>) shown in the example below:</p>
<pre><code class="hljs language-shell">git clone https://x-access-token:<token>@github.com/<owner>/<repo>.git</repo></owner></token></code></pre>
<p>The code above clones a repository over HTTP. It requires the full repository name, which includes the repository owner (user or organization) and the repository name. For example, the <a href="https://github.com/octocat/Hello-World">octocat Hello-World</a> repository has a full name of <code>octocat/hello-world</code>.</p>
<p>After your app clones the repository, it needs to pull the latest code changes and check out a specific Git ref. The code to do all of this will fit nicely into its own method. To perform these operations, the method needs the name and full name of the repository and the ref to checkout. The ref can be a commit SHA, branch, or tag. Add the following new method to the helper method section in <code>template_server.rb</code>:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Clones the repository to the current working directory, updates the</span>
<span class="hljs-comment"># contents using Git pull, and checks out the ref.</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># full_repo_name  - The owner and repo. Ex: octocat/hello-world</span>
<span class="hljs-comment"># repository      - The repository name</span>
<span class="hljs-comment"># ref             - The branch, commit SHA, or tag to check out</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">clone_repository</span><span class="hljs-params">(full_repo_name, repository, ref)</span></span>
  @git = Git.clone(<span class="hljs-string">"https://x-access-token:<span class="hljs-subst">#{@installation_token.to_s}</span>@github.com/<span class="hljs-subst">#{full_repo_name}</span>.git"</span>, repository)
  pwd = Dir.getwd()
  Dir.chdir(repository)
  @git.pull
  @git.checkout(ref)
  Dir.chdir(pwd)
<span class="hljs-keyword">end</span>
</code></pre>
<p>The code above uses the <code>ruby-git</code> gem to clone the repository using the app's installation token. This code clones the code in the same directory as <code>template_server.rb</code>. To run Git commands in the repository, the code needs to change into the repository directory. Before changing directories, the code stores the current working directory in a variable (<code>pwd</code>) to remember where to return before exiting the <code>clone_repository</code> method.</p>
<p>From the repository directory, this code fetches and merges the latest changes (<code>@git.pull</code>), checks out the ref (<code>@git.checkout(ref)</code>), then changes the directory back to the original working directory (<code>pwd</code>).</p>
<p>Now you've got a method that clones a repository and checks out a ref. Next, you need to add code to get the required input parameters and call the new <code>clone_repository</code> method. Add the following code under the <code>***** RUN A CI TEST *****</code> comment in your <code>initiate_check_run</code> helper method:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># ***** RUN A CI TEST *****</span>
full_repo_name = @payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]
repository     = @payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'name'</span>]
head_sha       = @payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'head_sha'</span>]

clone_repository(full_repo_name, repository, head_sha)
</code></pre>
<p>The code above gets the full repository name and the head SHA of the commit from the <code>check_run</code> webhook payload.</p>
<h3 id="step-23-running-rubocop"><a href="#step-23-running-rubocop">Step 2.3. Running RuboCop</a></h3>
<p>Great! You're cloning the repository and creating check runs using your CI server. Now you'll get into the nitty gritty details of the <a href="https://docs.rubocop.org/rubocop/usage/basic_usage.html#code-style-checker">RuboCop linter</a> and <a href="https://docs.github.com/en/rest/reference/checks#create-a-check-run">Checks API annotations</a>.</p>
<p>The following code runs RuboCop and saves the style code errors in JSON format. Add this code below the call to <code>clone_repository</code> you added in the <a href="#step-22-cloning-the-repository">previous step</a> and above the code that updates the check run to complete.</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Run RuboCop on all files in the repository</span>
@report = <span class="hljs-string">`rubocop '<span class="hljs-subst">#{repository}</span>' --format json`</span>
logger.debug @report
<span class="hljs-string">`rm -rf <span class="hljs-subst">#{repository}</span>`</span>
@output = JSON.parse @report
</code></pre>
<p>The code above runs RuboCop on all files in the repository's directory. The option <code>--format json</code> is a handy way to save a copy of the linting results in a machine-parsable format. See the <a href="https://docs.rubocop.org/rubocop/formatters.html#json-formatter">RuboCop docs</a> for details and an example of the JSON format.</p>
<p>Because this code stores the RuboCop results in a <code>@report</code> variable, it can safely remove the checkout of the repository. This code also parses the JSON so you can easily access the keys and values in your GitHub App using the <code>@output</code> variable.</p>
<div class="extended-markdown note border rounded-1 mb-4 p-3 border-blue bg-blue-light f5">
<p><strong>Note:</strong> The command used to remove the repository (<code>rm -rf</code>) cannot be undone. See <a href="#step-27-security-tips">Step 2.7. Security tips</a> to learn how to check webhooks for injected malicious commands that could be used to remove a different directory than intended by your app. For example, if a bad actor sent a webhook with the repository name <code>./</code>, your app would remove the root directory. ðŸ˜± If for some reason you're <em>not</em> using the method <code>verify_webhook_signature</code> (which is included in <code>template_server.rb</code>) to validate the sender of the webhook, make sure you check that the repository name is valid.</p>
</div>
<p>You can test that this code works and see the errors reported by RuboCop in your server's debug output. Start up the <code>template_server.rb</code> server again and create a new pull request in the repository where you're testing your app:</p>
<pre><code class="hljs language-shell">$ ruby template_server.rb</code></pre>
<p>You should see the linting errors in the debug output, although they aren't printed with formatting. You can use a web tool like <a href="https://jsonformatter.org/">JSON formatter</a> to format your JSON output like this formatted linting error output:</p>
<pre><code class="hljs language-json">{
  <span class="hljs-attr">"metadata"</span>: {
    <span class="hljs-attr">"rubocop_version"</span>: <span class="hljs-string">"0.60.0"</span>,
    <span class="hljs-attr">"ruby_engine"</span>: <span class="hljs-string">"ruby"</span>,
    <span class="hljs-attr">"ruby_version"</span>: <span class="hljs-string">"2.3.7"</span>,
    <span class="hljs-attr">"ruby_patchlevel"</span>: <span class="hljs-string">"456"</span>,
    <span class="hljs-attr">"ruby_platform"</span>: <span class="hljs-string">"universal.x86_64-darwin18"</span>
  },
  <span class="hljs-attr">"files"</span>: [
    {
      <span class="hljs-attr">"path"</span>: <span class="hljs-string">"Octocat-breeds/octocat.rb"</span>,
      <span class="hljs-attr">"offenses"</span>: [
        {
          <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"convention"</span>,
          <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols."</span>,
          <span class="hljs-attr">"cop_name"</span>: <span class="hljs-string">"Style/StringLiterals"</span>,
          <span class="hljs-attr">"corrected"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"location"</span>: {
            <span class="hljs-attr">"start_line"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"start_column"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"last_line"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"last_column"</span>: <span class="hljs-number">22</span>,
            <span class="hljs-attr">"length"</span>: <span class="hljs-number">6</span>,
            <span class="hljs-attr">"line"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"column"</span>: <span class="hljs-number">17</span>
          }
        },
        {
          <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"convention"</span>,
          <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols."</span>,
          <span class="hljs-attr">"cop_name"</span>: <span class="hljs-string">"Style/StringLiterals"</span>,
          <span class="hljs-attr">"corrected"</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">"location"</span>: {
            <span class="hljs-attr">"start_line"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"start_column"</span>: <span class="hljs-number">25</span>,
            <span class="hljs-attr">"last_line"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"last_column"</span>: <span class="hljs-number">29</span>,
            <span class="hljs-attr">"length"</span>: <span class="hljs-number">5</span>,
            <span class="hljs-attr">"line"</span>: <span class="hljs-number">17</span>,
            <span class="hljs-attr">"column"</span>: <span class="hljs-number">25</span>
          }
        }
      ]
    }
  ],
  <span class="hljs-attr">"summary"</span>: {
    <span class="hljs-attr">"offense_count"</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">"target_file_count"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"inspected_file_count"</span>: <span class="hljs-number">1</span>
  }
}
</code></pre>
<h3 id="step-24-collecting-rubocop-errors"><a href="#step-24-collecting-rubocop-errors">Step 2.4. Collecting RuboCop errors</a></h3>
<p>The <code>@output</code> variable contains the parsed JSON results of the RuboCop report. As shown above, the results contain a <code>summary</code> section that your code can use to quickly determine if there are any errors. The following code will set the check run conclusion to <code>success</code> when there are no reported errors. RuboCop reports errors for each file in the <code>files</code> array, so if there are errors, you'll need to extract some data from the file object.</p>
<p>The Checks API allows you to create annotations for specific lines of code. When you create or update a check run, you can add annotations. In this quickstart you are <a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run">updating the check run</a> with annotations.</p>
<p>The Checks API limits the number of annotations to a maximum of 50 per API request. To create more than 50 annotations, you have to make multiple requests to the <a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run">Update a check run</a> endpoint. For example, to create 105 annotations you'd need to call the <a href="https://docs.github.com/en/rest/reference/checks#update-a-check-run">Update a check run</a> endpoint three times. The first two requests would each have 50 annotations, and the third request would include the five remaining annotations. Each time you update the check run, annotations are appended to the list of annotations that already exist for the check run.</p>
<p>A check run expects annotations as an array of objects. Each annotation object must include the <code>path</code>, <code>start_line</code>, <code>end_line</code>, <code>annotation_level</code>, and <code>message</code>. RuboCop provides the <code>start_column</code> and <code>end_column</code> too, so you can include those optional parameters in the annotation. Annotations only support <code>start_column</code> and <code>end_column</code> on the same line. See the <a href="https://docs.github.com/en/rest/reference/checks#annotations-object-1"><code>annotations</code> object</a> reference documentation for details.</p>
<p>You'll extract the required information from RuboCop needed to create each annotation. Append the following code to the code you added in the <a href="#step-23-running-rubocop">previous section</a>:</p>
<pre><code class="hljs language-ruby">annotations = []
<span class="hljs-comment"># You can create a maximum of 50 annotations per request to the Checks</span>
<span class="hljs-comment"># API. To add more than 50 annotations, use the "Update a check run" API</span>
<span class="hljs-comment"># endpoint. This example code limits the number of annotations to 50.</span>
<span class="hljs-comment"># See /rest/reference/checks#update-a-check-run</span>
<span class="hljs-comment"># for details.</span>
max_annotations = <span class="hljs-number">50</span>

<span class="hljs-comment"># RuboCop reports the number of errors found in "offense_count"</span>
<span class="hljs-keyword">if</span> @output[<span class="hljs-string">'summary'</span>][<span class="hljs-string">'offense_count'</span>] == <span class="hljs-number">0</span>
  conclusion = <span class="hljs-string">'success'</span>
<span class="hljs-keyword">else</span>
  conclusion = <span class="hljs-string">'neutral'</span>
  @output[<span class="hljs-string">'files'</span>].each <span class="hljs-keyword">do</span> <span class="hljs-params">|file|</span>

    <span class="hljs-comment"># Only parse offenses for files in this app's repository</span>
    file_path = file[<span class="hljs-string">'path'</span>].gsub(<span class="hljs-regexp">/<span class="hljs-subst">#{repository}</span>\//</span>,<span class="hljs-string">''</span>)
    annotation_level = <span class="hljs-string">'notice'</span>

    <span class="hljs-comment"># Parse each offense to get details and location</span>
    file[<span class="hljs-string">'offenses'</span>].each <span class="hljs-keyword">do</span> <span class="hljs-params">|offense|</span>
      <span class="hljs-comment"># Limit the number of annotations to 50</span>
      <span class="hljs-keyword">next</span> <span class="hljs-keyword">if</span> max_annotations == <span class="hljs-number">0</span>
      max_annotations -= <span class="hljs-number">1</span>

      start_line   = offense[<span class="hljs-string">'location'</span>][<span class="hljs-string">'start_line'</span>]
      end_line     = offense[<span class="hljs-string">'location'</span>][<span class="hljs-string">'last_line'</span>]
      start_column = offense[<span class="hljs-string">'location'</span>][<span class="hljs-string">'start_column'</span>]
      end_column   = offense[<span class="hljs-string">'location'</span>][<span class="hljs-string">'last_column'</span>]
      message      = offense[<span class="hljs-string">'message'</span>]

      <span class="hljs-comment"># Create a new annotation for each error</span>
      annotation = {
        <span class="hljs-symbol">path:</span> file_path,
        <span class="hljs-symbol">start_line:</span> start_line,
        <span class="hljs-symbol">end_line:</span> end_line,
        <span class="hljs-symbol">start_column:</span> start_column,
        <span class="hljs-symbol">end_column:</span> end_column,
        <span class="hljs-symbol">annotation_level:</span> annotation_level,
        <span class="hljs-symbol">message:</span> message
      }
      <span class="hljs-comment"># Annotations only support start and end columns on the same line</span>
      <span class="hljs-keyword">if</span> start_line == end_line
        annotation.merge({<span class="hljs-symbol">start_column:</span> start_column, <span class="hljs-symbol">end_column:</span> end_column})
      <span class="hljs-keyword">end</span>

      annotations.push(annotation)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>This code limits the total number of annotations to 50. But you can modify this code to update the check run for each batch of 50 annotations. The code above includes the variable <code>max_annotations</code> that sets the limit to 50, which is used in the loop that iterates through the offenses.</p>
<p>When the <code>offense_count</code> is zero, the CI test is a <code>success</code>. If there are errors, this code sets the conclusion to <code>neutral</code> in order to prevent strictly enforcing errors from code linters. But you can change the conclusion to <code>failure</code> if you would like to ensure that the check suite fails when there are linting errors.</p>
<p>When errors are reported, the code above iterates through the <code>files</code> array in the RuboCop report. For each file, it extracts the file path and sets the annotation level to <code>notice</code>. You could go even further and set specific warning levels for each type of <a href="https://docs.rubocop.org/rubocop/cops.html">RuboCop Cop</a>, but to keep things simpler in this quickstart, all errors are set to a level of <code>notice</code>.</p>
<p>This code also iterates through each error in the <code>offenses</code> array and collects the location of the offense and error message. After extracting the information needed, the code creates an annotation for each error and stores it in the <code>annotations</code> array. Because annotations only support start and end columns on the same line, <code>start_column</code> and <code>end_column</code> are only added to the <code>annotation</code> object if the start and end line values are the same.</p>
<p>This code doesn't yet create an annotation for the check run. You'll add that code in the next section.</p>
<h3 id="step-25-updating-the-check-run-with-ci-test-results"><a href="#step-25-updating-the-check-run-with-ci-test-results">Step 2.5. Updating the check run with CI test results</a></h3>
<p>Each check run from GitHub contains an <code>output</code> object that includes a <code>title</code>, <code>summary</code>, <code>text</code>, <code>annotations</code>, and <code>images</code>. The <code>summary</code> and <code>title</code> are the only required parameters for the <code>output</code>, but those alone don't offer much detail, so this quickstart adds <code>text</code> and <code>annotations</code> too. The code here doesn't add an image, but feel free to add one if you'd like!</p>
<p>For the <code>summary</code>, this example uses the summary information from RuboCop and adds some newlines (<code>\n</code>) to format the output. You can customize what you add to the <code>text</code> parameter, but this example sets the <code>text</code> parameter to the RuboCop version. To set the <code>summary</code> and <code>text</code>, append this code to the code you added in the <a href="#step-24-collecting-rubocop-errors">previous section</a>:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Updated check run summary and text parameters</span>
summary = <span class="hljs-string">"Octo RuboCop summary\n-Offense count: <span class="hljs-subst">#{@output[<span class="hljs-string">'summary'</span>][<span class="hljs-string">'offense_count'</span>]}</span>\n-File count: <span class="hljs-subst">#{@output[<span class="hljs-string">'summary'</span>][<span class="hljs-string">'target_file_count'</span>]}</span>\n-Target file count: <span class="hljs-subst">#{@output[<span class="hljs-string">'summary'</span>][<span class="hljs-string">'inspected_file_count'</span>]}</span>"</span>
text = <span class="hljs-string">"Octo RuboCop version: <span class="hljs-subst">#{@output[<span class="hljs-string">'metadata'</span>][<span class="hljs-string">'rubocop_version'</span>]}</span>"</span>
</code></pre>
<p>Now you've got all the information you need to update your check run. In the <a href="#step-14-updating-a-check-run">first half of this quickstart</a>, you added this code to set the status of the check run to <code>success</code>:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Mark the check run as complete!</span>
updated_check_run = @installation_client.patch(
  <span class="hljs-string">"repos/<span class="hljs-subst">#{@payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]}</span>/check-runs/<span class="hljs-subst">#{@payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'id'</span>]}</span>"</span>,
  {
    <span class="hljs-symbol">accept:</span> <span class="hljs-string">'application/vnd.github.v3+json'</span>,
    <span class="hljs-symbol">name:</span> <span class="hljs-string">'Octo RuboCop'</span>,
    <span class="hljs-symbol">status:</span> <span class="hljs-string">'completed'</span>,
    <span class="hljs-symbol">conclusion:</span> <span class="hljs-string">'success'</span>,
    <span class="hljs-symbol">completed_at:</span> Time.now.utc.iso8601
  }
)
</code></pre>
<p>You'll need to update that code to use the <code>conclusion</code> variable you set based on the RuboCop results (to <code>success</code> or <code>neutral</code>). You can update the code with the following:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Mark the check run as complete! And if there are warnings, share them.</span>
updated_check_run = @installation_client.patch(
  <span class="hljs-string">"repos/<span class="hljs-subst">#{@payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]}</span>/check-runs/<span class="hljs-subst">#{@payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'id'</span>]}</span>"</span>,
  {
    <span class="hljs-symbol">accept:</span> <span class="hljs-string">'application/vnd.github.v3+json'</span>,
    <span class="hljs-symbol">name:</span> <span class="hljs-string">'Octo RuboCop'</span>,
    <span class="hljs-symbol">status:</span> <span class="hljs-string">'completed'</span>,
    <span class="hljs-symbol">conclusion:</span> conclusion,
    <span class="hljs-symbol">completed_at:</span> Time.now.utc.iso8601,
    <span class="hljs-symbol">output:</span> {
      <span class="hljs-symbol">title:</span> <span class="hljs-string">'Octo RuboCop'</span>,
      <span class="hljs-symbol">summary:</span> summary,
      <span class="hljs-symbol">text:</span> text,
      <span class="hljs-symbol">annotations:</span> annotations
    },
    <span class="hljs-symbol">actions:</span> [{
      <span class="hljs-symbol">label:</span> <span class="hljs-string">'Fix this'</span>,
      <span class="hljs-symbol">description:</span> <span class="hljs-string">'Automatically fix all linter notices.'</span>,
      <span class="hljs-symbol">identifier:</span> <span class="hljs-string">'fix_rubocop_notices'</span>
    }]
  }
)
</code></pre>
<p>Now that you're setting a conclusion based on the status of the CI test and you've added the output from the RuboCop results, you've created a CI test! Congratulations. ðŸ™Œ</p>
<p>The code above also adds a feature to your CI server called <a href="https://developer.github.com/changes/2018-05-23-request-actions-on-checks/">requested actions</a> via the <code>actions</code> object. (Note this is not related to <a href="https://docs.github.com/en/actions">GitHub Actions</a>.) Requested actions add a button in the <strong>Checks</strong> tab on GitHub that allows someone to request the check run to take additional action. The additional action is completely configurable by your app. For example, because RuboCop has a feature to automatically fix the errors it finds in Ruby code, your CI server can use a requested actions button to allow people to request automatic error fixes. When someone clicks the button, the app receives the <code>check_run</code> event with a <code>requested_action</code> action. Each requested action has an <code>identifier</code> that the app uses to determine which button was clicked.</p>
<p>The code above doesn't have RuboCop automatically fix errors yet. You'll add that in the next section. But first, take a look at the CI test that you just created by starting up the <code>template_server.rb</code> server again and creating a new pull request:</p>
<pre><code class="hljs language-shell">$ ruby template_server.rb</code></pre>
<p>The annotations will show up in the <strong>Checks</strong> tab.</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_checks_annotations.png" alt="Check run annotations in the checks tab"></p>
<p>Notice the "Fix this" button that you created by adding a requested action.</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_checks_fix_this_button.png" alt="Check run requested action button"></p>
<p>If the annotations are related to a file already included in the PR, the annotations will also show up in the <strong>Files changed</strong> tab.</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_checks_annotation_diff.png" alt="Check run annotations in the files changed tab"></p>
<h3 id="step-26-automatically-fixing-rubocop-errors"><a href="#step-26-automatically-fixing-rubocop-errors">Step 2.6. Automatically fixing RuboCop errors</a></h3>
<p>If you've made it this far, kudos! ðŸ‘ You've already created a CI test. In this section, you'll add one more feature that uses RuboCop to automatically fix the errors it finds. You already added the "Fix this" button in the <a href="#step-25-updating-the-check-run-with-ci-test-results">previous section</a>. Now you'll add the code to handle the <code>requested_action</code> check run event triggered when someone clicks the "Fix this" button.</p>
<p>The RuboCop tool <a href="https://docs.rubocop.org/rubocop/usage/basic_usage.html#auto-correcting-offenses">offers</a> the <code>--auto-correct</code> command-line option to automatically fix errors it finds. When you use the <code>--auto-correct</code> feature, the updates are applied to the local files on the server. You'll need to push the changes to GitHub after RuboCop does its magic.</p>
<p>To push to a repository, your app must have write permissions for "Repository contents." You set that permission back in <a href="#step-22-cloning-the-repository">Step 2.2. Cloning the repository</a> to <strong>Read &#x26; write</strong>, so you're all set.</p>
<p>In order to commit files, Git must know which <a href="https://docs.github.com/en/github/getting-started-with-github/setting-your-username-in-git">username</a> and <a href="https://docs.github.com/en/articles/setting-your-commit-email-address-in-git">email</a> to associate with the commit. Add two more environment variables in your <code>.env</code> file to store the name (<code>GITHUB_APP_USER_NAME</code>) and email (<code>GITHUB_APP_USER_EMAIL</code>) settings. Your name can be the name of your app and the email can be any email you'd like for this example. For example:</p>
<pre><code class="hljs language-ini"><span class="hljs-attr">GITHUB_APP_USER_NAME</span>=Octoapp
<span class="hljs-attr">GITHUB_APP_USER_EMAIL</span>=octoapp@octo-org.com
</code></pre>
<p>Once you've updated your <code>.env</code> file with the name and email of the author and committer, you'll be ready to add code to read the environment variables and set the Git configuration. You'll add that code soon.</p>
<p>When someone clicks the "Fix this" button, your app receives the <a href="https://docs.github.com/en/webhooks/event-payloads/#check_run">check run webhook</a> with the <code>requested_action</code> action type.</p>
<p>In <a href="#step-14-updating-a-check-run">Step 1.4. Updating a check run</a> you updated the your <code>event_handler</code> to handle look for actions in the <code>check_run</code> event. You already have a case statement to handle the <code>created</code> and <code>rerequested</code> action types:</p>
<pre><code class="hljs language-ruby"><span class="hljs-keyword">when</span> <span class="hljs-string">'check_run'</span>
  <span class="hljs-comment"># Check that the event is being sent to this app</span>
  <span class="hljs-keyword">if</span> @payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'app'</span>][<span class="hljs-string">'id'</span>].to_s === APP_IDENTIFIER
    <span class="hljs-keyword">case</span> @payload[<span class="hljs-string">'action'</span>]
    <span class="hljs-keyword">when</span> <span class="hljs-string">'created'</span>
      initiate_check_run
    <span class="hljs-keyword">when</span> <span class="hljs-string">'rerequested'</span>
      create_check_run
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>Add another <code>when</code> statement after the <code>rerequested</code> case to handle the <code>rerequested_action</code> event:</p>
<pre><code class="hljs language-ruby"><span class="hljs-keyword">when</span> <span class="hljs-string">'requested_action'</span>
  take_requested_action
</code></pre>
<p>This code calls a new method that will handle all <code>requested_action</code> events for your app. Add the following method to the helper methods section of your code:</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># Handles the check run `requested_action` event</span>
<span class="hljs-comment"># See /webhooks/event-payloads/#check_run</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">take_requested_action</span></span>
  full_repo_name = @payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'full_name'</span>]
  repository     = @payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'name'</span>]
  head_branch    = @payload[<span class="hljs-string">'check_run'</span>][<span class="hljs-string">'check_suite'</span>][<span class="hljs-string">'head_branch'</span>]

  <span class="hljs-keyword">if</span> (@payload[<span class="hljs-string">'requested_action'</span>][<span class="hljs-string">'identifier'</span>] == <span class="hljs-string">'fix_rubocop_notices'</span>)
    clone_repository(full_repo_name, repository, head_branch)

    <span class="hljs-comment"># Sets your commit username and email address</span>
    @git.config(<span class="hljs-string">'user.name'</span>, ENV[<span class="hljs-string">'GITHUB_APP_USER_NAME'</span>])
    @git.config(<span class="hljs-string">'user.email'</span>, ENV[<span class="hljs-string">'GITHUB_APP_USER_EMAIL'</span>])

    <span class="hljs-comment"># Automatically correct RuboCop style errors</span>
    @report = <span class="hljs-string">`rubocop '<span class="hljs-subst">#{repository}</span>/*' --format json --auto-correct`</span>

    pwd = Dir.getwd()
    Dir.chdir(repository)
    <span class="hljs-keyword">begin</span>
      @git.commit_all(<span class="hljs-string">'Automatically fix Octo RuboCop notices.'</span>)
      @git.push(<span class="hljs-string">"https://x-access-token:<span class="hljs-subst">#{@installation_token.to_s}</span>@github.com/<span class="hljs-subst">#{full_repo_name}</span>.git"</span>, head_branch)
    <span class="hljs-keyword">rescue</span>
      <span class="hljs-comment"># Nothing to commit!</span>
      puts <span class="hljs-string">'Nothing to commit'</span>
    <span class="hljs-keyword">end</span>
    Dir.chdir(pwd)
    <span class="hljs-string">`rm -rf '<span class="hljs-subst">#{repository}</span>'`</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre>
<p>The code above clones a repository just like the code you added in <a href="#step-22-cloning-the-repository">Step 2.2. Cloning the repository</a>. An <code>if</code> statement checks that the requested action's identifier matches the RuboCop button identifier (<code>fix_rubocop_notices</code>). When they match, the code clones the repository, sets the Git username and email, and runs RuboCop with the option <code>--auto-correct</code>. The <code>--auto-correct</code> option applies the changes to the local CI server files automatically.</p>
<p>The files are changed locally, but you'll still need to push them to GitHub. You'll use the handy <code>ruby-git</code> gem again to commit all of the files. Git has a single command that stages all modified or deleted files and commits them: <code>git commit -a</code>. To do the same thing using <code>ruby-git</code>, the code above uses the <code>commit_all</code> method. Then the code pushes the committed files to GitHub using the installation token, using the same authentication method as the Git <code>clone</code> command. Finally, it removes the repository directory to ensure the working directory is prepared for the next event.</p>
<p>That's it! The code you have written now completes your Checks API CI server. ðŸ’ª Restart your <code>template_server.rb</code> server again and create a new pull request:</p>
<pre><code class="hljs language-shell">$ ruby template_server.rb</code></pre>
<div class="extended-markdown note border rounded-1 mb-4 p-3 border-blue bg-blue-light f5">
<p><strong>Note:</strong> You'll need to restart the Sinatra server before you can test changes. Enter <code>Ctrl-C</code> to stop the server, and then run <code>ruby template_server.rb</code> again. If you don't want to do this every time you change your app code, you can look into <a href="http://sinatrarb.com/faq.html#reloading">reloading</a>.</p>
</div>
<p>This time, click the "Fix this" button to automatically fix the errors RuboCop found from the <strong>Checks</strong> tab.</p>
<p>In the <strong>Commits</strong> tab, you'll see a brand new commit by the username you set in your Git configuration. You may need to refresh your browser to see the update.</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_new_requested_action_commit.png" alt="A new commit to automatically fix Octo RuboCop notices"></p>
<p>Because a new commit was pushed to the repo, you'll see a new check suite for Octo RuboCop in the <strong>Checks</strong> tab. But this time there are no errors because RuboCop fixed them all. ðŸŽ‰</p>
<p><img src="https://docs.github.com/assets/images/github-apps/github_apps_checks_api_success.png" alt="No check suite or check run errors"></p>
<p>You can find the completed code for the app you just built in the <code>server.rb</code> file in the <a href="https://github.com/github-developer/creating-ci-tests-with-the-checks-api">Creating CI tests with the Checks API</a> repository.</p>
<h3 id="step-27-security-tips"><a href="#step-27-security-tips">Step 2.7. Security tips</a></h3>
<p>The template GitHub App code already has a method to verify incoming webhook payloads to ensure they are from a trusted source. If you are not validating webhook payloads, you'll need to ensure that when repository names are included in the webhook payload, the webhook does not contain arbitrary commands that could be used maliciously. The code below validates that the repository name only contains Latin alphabetic characters, hyphens, and underscores. To provide you with a complete example, the complete <code>server.rb</code> code available in the <a href="https://github.com/github-developer/creating-ci-tests-with-the-checks-api">companion repository</a> for this quickstart includes both the method of validating incoming webhook payloads and this check to verify the repository name.</p>
<pre><code class="hljs language-ruby"><span class="hljs-comment"># This quickstart example uses the repository name in the webhook with</span>
<span class="hljs-comment"># command-line utilities. For security reasons, you should validate the</span>
<span class="hljs-comment"># repository name to ensure that a bad actor isn't attempting to execute</span>
<span class="hljs-comment"># arbitrary commands or inject false repository names. If a repository name</span>
<span class="hljs-comment"># is provided in the webhook, validate that it consists only of latin</span>
<span class="hljs-comment"># alphabetic characters, `-`, and `_`.</span>
<span class="hljs-keyword">unless</span> @payload[<span class="hljs-string">'repository'</span>].<span class="hljs-literal">nil</span>?
  halt <span class="hljs-number">400</span> <span class="hljs-keyword">if</span> (@payload[<span class="hljs-string">'repository'</span>][<span class="hljs-string">'name'</span>] =~ <span class="hljs-regexp">/[0-9A-Za-z\-\_]+/</span>).<span class="hljs-literal">nil</span>?
<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="troubleshooting"><a href="#troubleshooting">Troubleshooting</a></h3>
<p>Here are a few common problems and some suggested solutions. If you run into any other trouble, you can ask for help or advice in the <a href="https://github.community/c/github-api-development-and-support/37">GitHub API Development and Support Forum</a>.</p>
<ul>
<li>
<p><strong>Q:</strong> My app isn't pushing code to GitHub. I don't see the fixes that RuboCop automatically makes!</p>
<p>  <strong>A:</strong> Make sure you have <strong>Read &#x26; write</strong> permissions for "Repository contents," and that you are cloning the repository with your installation token. See <a href="#step-22-cloning-the-repository">Step 2.2. Cloning the repository</a> for details.</p>
</li>
<li>
<p><strong>Q:</strong> I see an error in the <code>template_server.rb</code> debug output related to cloning my repository.</p>
<p>  <strong>A:</strong> If you see the following error, you haven't deleted the checkout of the repository in one or both of the <code>initiate_check_run</code> or <code>take_requested_action</code> methods:</p>
  <pre><code class="hljs language-shell">2018-11-26 16:55:13 - Git::GitExecuteError - git  clone '--' 'https://x-access-token:ghs_9b2080277016f797074c4dEbD350745f4257@github.com/codertocat/octocat-breeds.git' 'Octocat-breeds'  2>&#x26;1:fatal: destination path 'Octocat-breeds' already exists and is not an empty directory.:</code></pre>
<p>  Compare your code to the <code>server.rb</code> file to ensure you have the same code in your <code>initiate_check_run</code> and <code>take_requested_action</code> methods.</p>
</li>
<li>
<p><strong>Q:</strong> New check runs are not showing up in the "Checks" tab on GitHub.</p>
<p>  <strong>A:</strong> Restart Smee and re-run your <code>template_server.rb</code> server.</p>
</li>
<li>
<p><strong>Q:</strong> I do not see the "Re-run all" button in the "Checks" tab on GitHub.</p>
<p>  <strong>A:</strong> Restart Smee and re-run your <code>template_server.rb</code> server.</p>
</li>
</ul>
<h3 id="conclusion"><a href="#conclusion">Conclusion</a></h3>
<p>After walking through this guide, you've learned the basics of using the Checks API to create a CI server! To review, you:</p>
<ul>
<li>Configured your server to receive Checks API events and create check runs.</li>
<li>Used RuboCop to check code in repositories and create annotations for the errors.</li>
<li>Implemented a requested action that automatically fixes linter errors.</li>
</ul>
<h3 id="next-steps"><a href="#next-steps">Next steps</a></h3>
<p>Here are some ideas for what you can do next:</p>
<ul>
<li>Currently, the "Fix this" button is always displayed. Update the code you wrote to display the "Fix this" button only when RuboCop finds errors.</li>
<li>If you'd prefer that RuboCop doesn't commit files directly to the head branch, you can update the code to <a href="https://docs.github.com/en/rest/reference/pulls#create-a-pull-request">create a pull request</a> with a new branch based on the head branch.</li>
</ul>
    </div>
    </div>

    <div class="d-block mt-4 markdown-body">
      
    </div>
  </article>
</div>

      
      <section class="mt-lg-9 py-7 px-3 px-md-6 no-print" style="background:#fafbfc">
  <div class="container-xl gutter-lg-spacious clearfix">
    <div class="col-12 col-lg-6 col-xl-4 mb-6 mb-xl-0 float-left">
      
<form class="js-helpfulness f5">
  <h2
    data-help-start
    data-help-yes
    data-help-no
    class="mb-1 f4"
  >
    Did this doc help you?
  </h2>
  <p class="f6">
    <a href="https://docs.github.com/github/site-policy/github-privacy-statement">Privacy policy</a>
  </p>
  <p
    class="radio-group"
    data-help-start
    data-help-yes
    data-help-no
  >
    <input
      hidden
      id="helpfulness-yes"
      type="radio"
      name="helpfulness-vote"
      value="Yes"
      aria-label="Yes"
    />
    <label class="btn x-radio-label" for="helpfulness-yes">
      <svg version="1.1" width="24" height="24" viewBox="0 0 24 24" class="octicon octicon-thumbsup" aria-hidden="true"><path fill-rule="evenodd" d="M12.596 2.043c-1.301-.092-2.303.986-2.303 2.206v1.053c0 2.666-1.813 3.785-2.774 4.2a1.866 1.866 0 01-.523.131A1.75 1.75 0 005.25 8h-1.5A1.75 1.75 0 002 9.75v10.5c0 .967.784 1.75 1.75 1.75h1.5a1.75 1.75 0 001.742-1.58c.838.06 1.667.296 2.69.586l.602.17c1.464.406 3.213.824 5.544.824 2.188 0 3.693-.204 4.583-1.372.422-.554.65-1.255.816-2.05.148-.708.262-1.57.396-2.58l.051-.39c.319-2.386.328-4.18-.223-5.394-.293-.644-.743-1.125-1.355-1.431-.59-.296-1.284-.404-2.036-.404h-2.05l.056-.429c.025-.18.05-.372.076-.572.06-.483.117-1.006.117-1.438 0-1.245-.222-2.253-.92-2.941-.684-.675-1.668-.88-2.743-.956zM7 18.918c1.059.064 2.079.355 3.118.652l.568.16c1.406.39 3.006.77 5.142.77 2.277 0 3.004-.274 3.39-.781.216-.283.388-.718.54-1.448.136-.65.242-1.45.379-2.477l.05-.384c.32-2.4.253-3.795-.102-4.575-.16-.352-.375-.568-.66-.711-.305-.153-.74-.245-1.365-.245h-2.37c-.681 0-1.293-.57-1.211-1.328.026-.243.065-.537.105-.834l.07-.527c.06-.482.105-.921.105-1.25 0-1.125-.213-1.617-.473-1.873-.275-.27-.774-.455-1.795-.528-.351-.024-.698.274-.698.71v1.053c0 3.55-2.488 5.063-3.68 5.577-.372.16-.754.232-1.113.26v7.78zM3.75 20.5a.25.25 0 01-.25-.25V9.75a.25.25 0 01.25-.25h1.5a.25.25 0 01.25.25v10.5a.25.25 0 01-.25.25h-1.5z"></path></svg>
    </label>
    <input
      hidden
      id="helpfulness-no"
      type="radio"
      name="helpfulness-vote"
      value="No"
      aria-label="No"
    />
    <label class="btn x-radio-label" for="helpfulness-no">
      <svg version="1.1" width="24" height="24" viewBox="0 0 24 24" class="octicon octicon-thumbsdown" aria-hidden="true"><path fill-rule="evenodd" d="M12.596 21.957c-1.301.092-2.303-.986-2.303-2.206v-1.053c0-2.666-1.813-3.785-2.774-4.2a1.864 1.864 0 00-.523-.13A1.75 1.75 0 015.25 16h-1.5A1.75 1.75 0 012 14.25V3.75C2 2.784 2.784 2 3.75 2h1.5a1.75 1.75 0 011.742 1.58c.838-.06 1.667-.296 2.69-.586l.602-.17C11.748 2.419 13.497 2 15.828 2c2.188 0 3.693.204 4.583 1.372.422.554.65 1.255.816 2.05.148.708.262 1.57.396 2.58l.051.39c.319 2.386.328 4.18-.223 5.394-.293.644-.743 1.125-1.355 1.431-.59.296-1.284.404-2.036.404h-2.05l.056.429c.025.18.05.372.076.572.06.483.117 1.006.117 1.438 0 1.245-.222 2.253-.92 2.942-.684.674-1.668.879-2.743.955zM7 5.082c1.059-.064 2.079-.355 3.118-.651.188-.054.377-.108.568-.16 1.406-.392 3.006-.771 5.142-.771 2.277 0 3.004.274 3.39.781.216.283.388.718.54 1.448.136.65.242 1.45.379 2.477l.05.385c.32 2.398.253 3.794-.102 4.574-.16.352-.375.569-.66.711-.305.153-.74.245-1.365.245h-2.37c-.681 0-1.293.57-1.211 1.328.026.244.065.537.105.834l.07.527c.06.482.105.922.105 1.25 0 1.125-.213 1.617-.473 1.873-.275.27-.774.456-1.795.528-.351.024-.698-.274-.698-.71v-1.053c0-3.55-2.488-5.063-3.68-5.577A3.485 3.485 0 007 12.861V5.08zM3.75 3.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h1.5a.25.25 0 00.25-.25V3.75a.25.25 0 00-.25-.25h-1.5z"></path></svg>
    </label>
  </p>
  <p class="text-gray f6" hidden data-help-yes>
    Want to learn about new docs features and updates? Sign up for updates!
  </p>
  <p class="text-gray f6" hidden data-help-no>
    We're continually improving our docs. We'd love to hear how we can do better.
  </p>
  <input
    type="text"
    class="d-none"
    name="helpfulness-token"
    aria-hidden="true"
  />
  <p hidden data-help-no>
    <label
      class="d-block mb-1 f6"
      for="helpfulness-comment"
    >
      <span>Let us know what we can do better</span>
      <span class="text-normal text-gray-light float-right ml-1">
        Optional
      </span>
    </label>
    <textarea
      class="form-control input-sm width-full"
      name="helpfulness-comment"
      id="helpfulness-comment"
    ></textarea>
  </p>
  <p>
    <label
      class="d-block mb-1 f6"
      for="helpfulness-email"
      hidden
      data-help-no
    >
      Can we contact you if we have more questions?
      <span class="text-normal text-gray-light float-right ml-1">
        Optional
      </span>
    </label>
    <input
      type="email"
      class="form-control input-sm width-full"
      name="helpfulness-email"
      id="helpfulness-email"
      placeholder="email@example.com"
      hidden
      data-help-yes
      data-help-no
    />
  </p>
  <p
    class="text-right"
    hidden
    data-help-yes
    data-help-no
  >
    <button type="submit" class="btn btn-blue btn-sm">
      Send
    </button>
  </p>
  <p class="text-gray f6" hidden data-help-end>
    Thank you! Your feedback has been submitted.
  </p>
</form>


    </div>
    <div class="col-12 col-lg-6 col-xl-4 mb-6 mb-xl-0 float-left">
      
<div class="f5 contribution">
  <h2 class="f4">Help us make these docs great!</h2>
  <p class="text-gray f6">All GitHub docs are open source. See something that's wrong or unclear? Submit a pull request.</p>
  
    
  
  <a class="btn btn-outline" href="https://github.com/github/docs/edit/main/content/developers/apps/creating-ci-tests-with-the-checks-api.md">
    <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-git-pull-request" aria-hidden="true"><path fill-rule="evenodd" d="M7.177 3.073L9.573.677A.25.25 0 0110 .854v4.792a.25.25 0 01-.427.177L7.177 3.427a.25.25 0 010-.354zM3.75 2.5a.75.75 0 100 1.5.75.75 0 000-1.5zm-2.25.75a2.25 2.25 0 113 2.122v5.256a2.251 2.251 0 11-1.5 0V5.372A2.25 2.25 0 011.5 3.25zM11 2.5h-1V4h1a1 1 0 011 1v5.628a2.251 2.251 0 101.5 0V5A2.5 2.5 0 0011 2.5zm1 10.25a.75.75 0 111.5 0 .75.75 0 01-1.5 0zM3.75 12a.75.75 0 100 1.5.75.75 0 000-1.5z"></path></svg>
    Make a contribution
  </a>
  <p class="text-gray f6 mt-2">Or, <a href="https://github.com/github/docs/blob/main/CONTRIBUTING.md" target="_blank">learn how to contribute.</a></p>
</div>


    </div>
    <div class="col-12 col-lg-12 col-xl-4 float-left">
      <!-- Contact support banner -->
<div>
  <h3 class="mb-2 f4">
    Still need help?
  </h3>
  
  <a id="ask-community" href="https://github.community/" class="btn btn-outline mr-4 mt-2">
    <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-people" aria-hidden="true"><path fill-rule="evenodd" d="M5.5 3.5a2 2 0 100 4 2 2 0 000-4zM2 5.5a3.5 3.5 0 115.898 2.549 5.507 5.507 0 013.034 4.084.75.75 0 11-1.482.235 4.001 4.001 0 00-7.9 0 .75.75 0 01-1.482-.236A5.507 5.507 0 013.102 8.05 3.49 3.49 0 012 5.5zM11 4a.75.75 0 100 1.5 1.5 1.5 0 01.666 2.844.75.75 0 00-.416.672v.352a.75.75 0 00.574.73c1.2.289 2.162 1.2 2.522 2.372a.75.75 0 101.434-.44 5.01 5.01 0 00-2.56-3.012A3 3 0 0011 4z"></path></svg>
    Ask the GitHub community
  </a>
  <a id="contact-us" href="https://support.github.com/contact" class="btn btn-outline mt-2">
    <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-comment-discussion" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 2.75a.25.25 0 01.25-.25h8.5a.25.25 0 01.25.25v5.5a.25.25 0 01-.25.25h-3.5a.75.75 0 00-.53.22L3.5 11.44V9.25a.75.75 0 00-.75-.75h-1a.25.25 0 01-.25-.25v-5.5zM1.75 1A1.75 1.75 0 000 2.75v5.5C0 9.216.784 10 1.75 10H2v1.543a1.457 1.457 0 002.487 1.03L7.061 10h3.189A1.75 1.75 0 0012 8.25v-5.5A1.75 1.75 0 0010.25 1h-8.5zM14.5 4.75a.25.25 0 00-.25-.25h-.5a.75.75 0 110-1.5h.5c.966 0 1.75.784 1.75 1.75v5.5A1.75 1.75 0 0114.25 12H14v1.543a1.457 1.457 0 01-2.487 1.03L9.22 12.28a.75.75 0 111.06-1.06l2.22 2.22v-2.19a.75.75 0 01.75-.75h1a.25.25 0 00.25-.25v-5.5z"></path></svg>
    Contact support
  </a>
</div>

    </div>
  </div>
</section>

      <footer class="py-6 text-small">
  <div class="container-xl d-flex px-3 px-md-6">
    <ul class="d-flex list-style-none flex-wrap flex-justify-center flex-xl-justify-start">
      <li class="d-flex mr-xl-3 text-gray">
        <svg version="1.1" width="20" height="20" viewBox="0 0 16 16" class="octicon octicon-mark-github mr-2 mr-xl-3" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
        <span>&copy; 2021 GitHub, Inc.</span>
      </li>
      <li class="ml-3"><a href="https://docs.github.com/github/site-policy/github-terms-of-service">Terms </a></li>
      <li class="ml-3"><a href="https://docs.github.com/github/site-policy/github-privacy-statement">Privacy </a></li>
      <li class="ml-3"><a href="https://github.com/security">Security</a></li>
      <li class="ml-3"><a href="https://www.githubstatus.com/">Status</a></li>
      <li class="ml-3"><a href="https://docs.github.com/">Help</a></li>
      <li class="ml-3"><a href="https://support.github.com/">Contact GitHub</a></li>
      <li class="ml-3"><a href="https://github.com/pricing">Pricing</a></li>
      <li class="ml-3"><a href="https://docs.github.com/developers">Developer API</a></li>
      <li class="ml-3"><a href="https://services.github.com/">Training</a></li>
      <li class="ml-3"><a href="https://github.com/about">About</a></li>
    </ul>
  </div>
</footer>

<script id="expose" type="application/json">{"searchOptions":{"languages":["en","cn","ja","es","pt","de"],"versions":{"free-pro-team@latest":"dotcom","enterprise-server@3.0":"3.0","enterprise-server@2.22":"2.22","enterprise-server@2.21":"2.21","github-ae@latest":"ghae"},"nonEnterpriseDefaultVersion":"free-pro-team@latest"}}</script>
<script src="https://docs.github.com/dist/index.js?hash=cd23048e08dd2fffdbd4cec90c6e440c"></script>


      <button class="arrow-for-scrolling-top" id="js-scroll-top">
    <svg version="1.1" width="16" height="16" viewBox="0 0 16 16" class="octicon octicon-chevron-up" aria-hidden="true"><path fill-rule="evenodd" d="M3.22 9.78a.75.75 0 010-1.06l4.25-4.25a.75.75 0 011.06 0l4.25 4.25a.75.75 0 01-1.06 1.06L8 6.06 4.28 9.78a.75.75 0 01-1.06 0z"></path></svg>
</button>

    </main>
  </body>

<!-- Mirrored from docs.github.com/en/developers/apps/creating-ci-tests-with-the-checks-api by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 12 Apr 2021 01:12:35 GMT -->
</html>
